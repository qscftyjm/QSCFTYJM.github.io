<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>函数 | Hexo</title><meta name="author" content="John Doe"><meta name="copyright" content="John Doe"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="函数1，定义和调用函数1，定义函数在python中，使用def定义函数。语法格式如下： 12def 函数名([参数列表]):	函数体 无参函数：当函数体内代码不需要外部传入参数时，也能够独立运行，那么就可以定义无参数的函数； 12def hi():	print(&quot;Hi,python.&quot;) 当函数没有参数时，也必须添加一对小括号，否则抛出语法异常 空函数：就是不执行任何操作的函数">
<meta property="og:type" content="article">
<meta property="og:title" content="函数">
<meta property="og:url" content="https://qscftyjm.github.io/2023/11/30/%E5%87%BD%E6%95%B0/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="函数1，定义和调用函数1，定义函数在python中，使用def定义函数。语法格式如下： 12def 函数名([参数列表]):	函数体 无参函数：当函数体内代码不需要外部传入参数时，也能够独立运行，那么就可以定义无参数的函数； 12def hi():	print(&quot;Hi,python.&quot;) 当函数没有参数时，也必须添加一对小括号，否则抛出语法异常 空函数：就是不执行任何操作的函数">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg3.png">
<meta property="article:published_time" content="2023-11-30T02:49:05.000Z">
<meta property="article:modified_time" content="2022-11-30T02:49:05.000Z">
<meta property="article:author" content="John Doe">
<meta property="article:tag" content="python学习">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg3.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://qscftyjm.github.io/2023/11/30/%E5%87%BD%E6%95%B0/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: {"limitDay":500,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":230},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: true,
    post: true
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":50,"languages":{"author":"作者: John Doe","link":"链接: ","source":"来源: Hexo","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: true,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '函数',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-11-30 10:49:05'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><link rel="stylesheet" href="/css/universe.css"><link rel="stylesheet" href="/css/custom.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="/css/custom.css"><link rel="stylesheet" href="/css/cat.css"><div id="myscoll"></div><!-- hexo injector head_end start --><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-double-row-display@1.00/cardlistpost.min.css"/>
<style>#recent-posts > .recent-post-item >.recent-post-info > .article-meta-wrap > .tags:before {content:"\A";
  white-space: pre;}#recent-posts > .recent-post-item >.recent-post-info > .article-meta-wrap > .tags > .article-meta__separator{display:none}</style>
<link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-categories-card@1.0.0/lib/categorybar.css"><link rel="stylesheet" href="https://cdn.cbd.int/hexo-butterfly-clock-anzhiyu/lib/clock.min.css" /><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-footer-beautify@1.0.0/lib/runtime.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/animate.min.css" media="print" onload="this.media='screen'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiperstyle.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/font-awesome-animation.min.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/tag_plugins.css" media="defer" onload="this.media='all'"><script src="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/carousel-touch.js"></script><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-filter-gitcalendar/lib/gitcalendar.css" media="print" onload="this.media='all'"><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><script>(()=>{
  const $loadingBox = document.getElementById('loading-box')
  const $body = document.body
  const preloader = {
    endLoading: () => {
      $body.style.overflow = ''
      $loadingBox.classList.add('loaded')
    },
    initLoading: () => {
      $body.style.overflow = 'hidden'
      $loadingBox.classList.remove('loaded')
    }
  }

  preloader.initLoading()
  window.addEventListener('load',() => { preloader.endLoading() })

  if (true) {
    document.addEventListener('pjax:send', () => { preloader.initLoading() })
    document.addEventListener('pjax:complete', () => { preloader.endLoading() })
  }
})()</script><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">8</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">4</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/"><i class="fa-fw icon-shouye3"></i><svg class="menu_icon faa-tada" aria-hidden="true"><use xlink:href="#icon-shouye3"></use></svg><span> 首页</span></a></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true"><use xlink:href="#icon-wenzhang"></use></svg><span> 文章</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><svg class="menu_icon faa-tada" aria-hidden="true"><use xlink:href="#icon-guidang">                   </use></svg><span> 归档</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><svg class="menu_icon faa-tada" aria-hidden="true"><use xlink:href="#icon-tag-group">                   </use></svg><span> 标签</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><svg class="menu_icon faa-tada" aria-hidden="true"><use xlink:href="#icon-fenlei2">                   </use></svg><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:randomPost();"><svg class="menu_icon faa-tada" aria-hidden="true"><use xlink:href="#icon-zuji">                   </use></svg><span> 随便逛逛</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true"><use xlink:href="#icon-liebiao"></use></svg><span> 列表</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/"><svg class="menu_icon faa-tada" aria-hidden="true"><use xlink:href="#icon-yinle-">                   </use></svg><span> 音乐</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/Gallery/"><svg class="menu_icon faa-tada" aria-hidden="true"><use xlink:href="#icon-tianjiazhaopian">                   </use></svg><span> 照片</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/movies/"><svg class="menu_icon faa-tada" aria-hidden="true"><use xlink:href="#icon-touyingyi">                   </use></svg><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/comments/"><i class="fa-fw icon-liuyanban-05"></i><svg class="menu_icon faa-tada" aria-hidden="true"><use xlink:href="#icon-liuyanban-05"></use></svg><span> 留言板</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/link/"><i class="fa-fw icon-link_"></i><svg class="menu_icon faa-tada" aria-hidden="true"><use xlink:href="#icon-link_"></use></svg><span> 友链</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/about/"><i class="fa-fw icon-relation-analysis-full"></i><svg class="menu_icon faa-tada" aria-hidden="true"><use xlink:href="#icon-relation-analysis-full"></use></svg><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg3.png')"><nav id="nav"><span id="blog-info"><a href="/" title="Hexo"><span class="site-name">Hexo</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/"><i class="fa-fw icon-shouye3"></i><svg class="menu_icon faa-tada" aria-hidden="true"><use xlink:href="#icon-shouye3"></use></svg><span> 首页</span></a></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true"><use xlink:href="#icon-wenzhang"></use></svg><span> 文章</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><svg class="menu_icon faa-tada" aria-hidden="true"><use xlink:href="#icon-guidang">                   </use></svg><span> 归档</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><svg class="menu_icon faa-tada" aria-hidden="true"><use xlink:href="#icon-tag-group">                   </use></svg><span> 标签</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><svg class="menu_icon faa-tada" aria-hidden="true"><use xlink:href="#icon-fenlei2">                   </use></svg><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:randomPost();"><svg class="menu_icon faa-tada" aria-hidden="true"><use xlink:href="#icon-zuji">                   </use></svg><span> 随便逛逛</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true"><use xlink:href="#icon-liebiao"></use></svg><span> 列表</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/"><svg class="menu_icon faa-tada" aria-hidden="true"><use xlink:href="#icon-yinle-">                   </use></svg><span> 音乐</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/Gallery/"><svg class="menu_icon faa-tada" aria-hidden="true"><use xlink:href="#icon-tianjiazhaopian">                   </use></svg><span> 照片</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/movies/"><svg class="menu_icon faa-tada" aria-hidden="true"><use xlink:href="#icon-touyingyi">                   </use></svg><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/comments/"><i class="fa-fw icon-liuyanban-05"></i><svg class="menu_icon faa-tada" aria-hidden="true"><use xlink:href="#icon-liuyanban-05"></use></svg><span> 留言板</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/link/"><i class="fa-fw icon-link_"></i><svg class="menu_icon faa-tada" aria-hidden="true"><use xlink:href="#icon-link_"></use></svg><span> 友链</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/about/"><i class="fa-fw icon-relation-analysis-full"></i><svg class="menu_icon faa-tada" aria-hidden="true"><use xlink:href="#icon-relation-analysis-full"></use></svg><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">函数</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-11-30T02:49:05.000Z" title="发表于 2023-11-30 10:49:05">2023-11-30</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-11-30T02:49:05.000Z" title="更新于 2022-11-30 10:49:05">2022-11-30</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">16.2k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>59分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="函数"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h1><h2 id="1，定义和调用函数"><a href="#1，定义和调用函数" class="headerlink" title="1，定义和调用函数"></a>1，定义和调用函数</h2><h3 id="1，定义函数"><a href="#1，定义函数" class="headerlink" title="1，定义函数"></a>1，定义函数</h3><p>在python中，使用def定义函数。语法格式如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">def 函数名([参数列表]):</span><br><span class="line">	函数体</span><br></pre></td></tr></table></figure>
<p>无参函数：当函数体内代码不需要外部传入参数时，也能够独立运行，那么就可以定义无参数的函数；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">def hi():</span><br><span class="line">	print(&quot;Hi,python.&quot;)</span><br></pre></td></tr></table></figure>
<p>当函数没有参数时，也必须添加一对小括号，否则抛出语法异常</p>
<p>空函数：就是不执行任何操作的函数，在函数体内使用pass空语句填充函数体。如果缺少了pass，就会抛出语法错误。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">def no():</span><br><span class="line">	pass</span><br></pre></td></tr></table></figure>
<p>空函数的作用：可以作为占位符备用，在函数的具体功能还没有实现前，可以先定义空函数，让代码能运行起来，事后再编写函数体代码</p>
<p>有参函数：当函数体内代码必须依赖外部传入参数时，那么就可以定义有参数的函数</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">def abs(x,y):</span><br><span class="line">	if x &gt;= y:</span><br><span class="line">		return x</span><br><span class="line">	else:</span><br><span class="line">		return y</span><br></pre></td></tr></table></figure>
<p>函数的参数放在函数名后面的小括号内，可以设置一个或多个参数，以逗号分隔。函数的返回值通过return语句设置。</p>
<p>在函数体内，一旦执行return语句，函数将返回结果，并立即停止函数的运行。如果没有return语句，执行完函数体内所有代码后，也会返回特殊值（None）。如果明确让函数返回None。可以按如下方式编写。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">return None</span><br><span class="line">简写为：</span><br><span class="line">return</span><br></pre></td></tr></table></figure>
<p>【拓展】</p>
<p>再定义函数时，如果在函数体第一行使用”””或””添加多行注释时，则在调用函数时，会自动提示注释信息。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">def abs(x):</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    abs(float x)</span><br><span class="line">    功能：求绝对值</span><br><span class="line">    参数：x,为数字</span><br><span class="line">    返回值：x的绝对值</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line"></span><br><span class="line">    if x &gt;= 0:</span><br><span class="line">        return x</span><br><span class="line">    else:</span><br><span class="line">        return -x</span><br><span class="line">    </span><br><span class="line">print(abs(13))</span><br></pre></td></tr></table></figure>
<p>因此，可以在函数体第一行添加函数的帮助信息，如函数的功能、参数类型和作用、返回值类型等信息</p>
<h3 id="2，调用函数"><a href="#2，调用函数" class="headerlink" title="2，调用函数"></a>2，调用函数</h3><p>定义函数后，函数内的代码不会自动执行，只用调用函数时，函数体的代码才被执行。使用小括号可以直接调用一个函数。语法格式如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">函数名（[参数列表]）</span><br></pre></td></tr></table></figure>
<p>如果在定义函数时没有设置参数，则调用函数时不用传入参数。</p>
<p>如果在定义函数时设置了多个参数，则调用函数时必须传入同等数量的参数，否则抛出TypeError错误。如果传入的参数数量是对的，但参数类型不能被函数所接收，也会抛出TypeError错误，并且给出错误信息。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hi()</span><br><span class="line">no()</span><br><span class="line">abs(-45)</span><br></pre></td></tr></table></figure>
<p>调用函数的3种形式：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">1，语句：</span><br><span class="line">例如：一下三个函数都是以语句形式调用。</span><br><span class="line">hi()</span><br><span class="line">no()</span><br><span class="line">abs(-45)</span><br><span class="line"></span><br><span class="line">2，表达式：</span><br><span class="line">函数都有返回值，因此调用函数之后，实际上得到的就是一个值，值可以参与表达式运算。例如，下面代码将函数返回值（45）乘以2，然后把表达式的运算结果（90）再赋值给变量num</span><br><span class="line">num = abs(-45) * 2</span><br><span class="line"></span><br><span class="line">3,参数</span><br><span class="line">把函数调用作为参数传递给另一个函数。例如：</span><br><span class="line">print(abs(-45))</span><br></pre></td></tr></table></figure>
<p>函数都是先定义，后调用。在定义阶段发现语法错误，将会提示错误，但是不会判断逻辑错误，只有在调用函数时，才会判断逻辑错误。</p>
<h3 id="3，定义嵌套函数"><a href="#3，定义嵌套函数" class="headerlink" title="3，定义嵌套函数"></a>3，定义嵌套函数</h3><p>python允许创建多级嵌套的函数，就允许在函数内部定义函数，这些内部函数都是遵循各自的作用域和生命周期等规则。</p>
<p>嵌套函数：内层函数可以访问外层函数作用域中的变量，但是外层函数不允许访问内层函数作用域中的变量。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">def outer():</span><br><span class="line">	x = 1</span><br><span class="line">	def inner():</span><br><span class="line">		print(x)</span><br><span class="line">	inner()</span><br><span class="line">	outer()</span><br></pre></td></tr></table></figure>
<h2 id="2-函数的参数和返回值"><a href="#2-函数的参数和返回值" class="headerlink" title="2,函数的参数和返回值"></a>2,函数的参数和返回值</h2><h3 id="1，形参与实参"><a href="#1，形参与实参" class="headerlink" title="1，形参与实参"></a>1，形参与实参</h3><p>函数的参数分为两种：</p>
<p>形参：在定义函数时声明的参数变量，尽在函数内部可见</p>
<p>实参：在调用函数时实际传入的值。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">r</span>(<span class="params">a,b</span>):</span><br><span class="line">	<span class="keyword">return</span> a+b</span><br><span class="line">	</span><br><span class="line">x=<span class="number">1</span></span><br><span class="line">x=<span class="number">2</span></span><br><span class="line"><span class="built_in">print</span>(f(x,y))</span><br></pre></td></tr></table></figure>
<p>上面的示例中。a,b为形参，x,y为实参。在执行函数时，Python把实参变量的值赋值给形参变量，实现参数的传递。</p>
<p>根据实参的类型不同，可以把实参分为两种类型：</p>
<p>固定值：实参为不可变对象，如数字，布尔值，字符串，元组</p>
<p>可变值：实参为可变对象，如列表，字典和集合</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">def fun(obj):</span><br><span class="line">	obj += obj</span><br><span class="line">	return obj</span><br><span class="line">	</span><br><span class="line">#传递固定值</span><br><span class="line">a = 1</span><br><span class="line">b = fun(a)</span><br><span class="line">print(a)</span><br><span class="line">print(b)   #输出2</span><br><span class="line"></span><br><span class="line">#传递可变值</span><br><span class="line">a = [1]</span><br><span class="line">b = fun(a)</span><br><span class="line">print(a)</span><br><span class="line">print(b)   #输出[1,1]</span><br></pre></td></tr></table></figure>
<h3 id="2，位置参数"><a href="#2，位置参数" class="headerlink" title="2，位置参数"></a>2，位置参数</h3><p>位置参数就是根据位置关系有序把实参的值有序传递给形参。在一般情况下，实参和形参应该是一一对应的，不能够错位传递，否则会引发异常或者运行错误。</p>
<p>【提示】</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">在调用函数时，实参和形参必须保持一致，具体说明如下：</span><br><span class="line">在没有设置默认参数和可变参数的情况下，实参和形参的个数必须相同</span><br><span class="line">在一般情况下，实参和形参的类型必须保持一致。</span><br></pre></td></tr></table></figure>
<p>在python中，内置函数会自动检查传入值的个数和类型，如果个数或类型不一致，则会引发异常。例如，调用内置函数abs()，并传入字符串，则抛出TypeError错误。</p>
<p>对于自定义函数，Python会自动检查实参个数，如果实参和形参个数不一致，将抛出TypeError错误。但是Python不会检查传入值的类型和形参类型是否一致。</p>
<p>如果实参于形参的位置顺序不对应，虽然Python不会自动检查，但是容易引发异常或逻辑错误</p>
<h3 id="3，关键字参数"><a href="#3，关键字参数" class="headerlink" title="3，关键字参数"></a>3，关键字参数</h3><p>在调用函数时，实参一般是按顺序传递给形参的。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">test</span>(<span class="params">a,b,c</span>):</span><br><span class="line">	<span class="built_in">print</span>(<span class="string">&quot;a=&quot;</span>,a)</span><br><span class="line">	<span class="built_in">print</span>(<span class="string">&quot;b=&quot;</span>,b)</span><br><span class="line">	<span class="built_in">print</span>(<span class="string">&quot;c=&quot;</span>,c)</span><br><span class="line">	</span><br><span class="line">test(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)</span><br></pre></td></tr></table></figure>
<p>实参1，2，3按顺序传入函数，函数能够按顺序把他们分配给形参变量a,b,c。</p>
<p>关键字参数能够打破参数的位置关系，根据关键字映射实现给形参赋值。例如：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">test</span>(<span class="params">a,b,c</span>):</span><br><span class="line">	<span class="built_in">print</span>(<span class="string">&quot;a=&quot;</span>,a)</span><br><span class="line">	<span class="built_in">print</span>(<span class="string">&quot;b=&quot;</span>,b)</span><br><span class="line">	<span class="built_in">print</span>(<span class="string">&quot;c=&quot;</span>,c)</span><br><span class="line">	</span><br><span class="line">test(c=<span class="number">3</span>,a=<span class="number">1</span>,b=<span class="number">2</span>)</span><br></pre></td></tr></table></figure>
<p>关键字参数是针对调用函数时传递的实参而言，而位置参数是针对定义函数时设置的形参而言。</p>
<p>位置参数和关键字参数可以混用，一般位置参数在前，关键字参数在后。</p>
<p>一旦使用关键字参数后，其后不能使用位置参数。因为这样会重复为一个形参赋值，应确保形参和实参个数相同。</p>
<p>例如：test(c = 3,b=2,1)</p>
<h3 id="4，默认参数"><a href="#4，默认参数" class="headerlink" title="4，默认参数"></a>4，默认参数</h3><p>调用Python内置函数int()，可以传递一个参数，也可以传递两个参数。</p>
<p>int()函数的第2个参数用来设置转换进制，默认是十进制（base=10）。因此，默认参数的作用是能够简化函数调用，当需要的时侯，也允许传入额外的参数来覆盖默认参数值。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">def 函数值(参数1,参数2,...,参数n=默认值n,参数n+1=默认值n+1,...):</span><br><span class="line">	函数体</span><br></pre></td></tr></table></figure>
<p>当定义函数时，如果某个参数的值不经常变动，就可以考虑将这个参数设置为默认参数。使用默认参数之后，位置参数必须放到前面，默认参数放到后面。位置参数和默认参数没有个数限制。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">power</span>(<span class="params">x,n</span>):</span><br><span class="line">	s=<span class="number">1</span></span><br><span class="line">	<span class="keyword">while</span> n &gt; <span class="number">0</span>:</span><br><span class="line">		n = n - <span class="number">1</span></span><br><span class="line">		s = s * x</span><br><span class="line">	<span class="keyword">return</span> s</span><br><span class="line"></span><br><span class="line">power(<span class="number">34</span>)</span><br></pre></td></tr></table></figure>
<p>默认参数是在定义函数时赋值的，且仅赋值一次。当调用函数时，如果没有传入实参值，函数就会使用默认值。</p>
<p>应避免使用可变参数作为参数的默认值</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">sum</span>(<span class="params">num,scores=[]</span>):</span><br><span class="line">	scores.append(num)</span><br><span class="line">	<span class="keyword">return</span> scores</span><br><span class="line">	</span><br><span class="line">result=<span class="built_in">sum</span>(<span class="number">12</span>)</span><br><span class="line"><span class="built_in">print</span>(result)</span><br><span class="line">result=<span class="built_in">sum</span>(<span class="number">24</span>)</span><br><span class="line"><span class="built_in">print</span>(result)</span><br></pre></td></tr></table></figure>
<p>预设程序运行的结果是[12]、[24]，但是实际结果是[12]、[12,24]。出现问题的原因在于scores的默认值是一个列表对象，而列表对象，而列表对象是一个可变类型，那么使用append()方法添加列表元素时，不会为score重新创建一个新的列表，而是在原来的对象的基础上只想操作。</p>
<p>因此，对于默认参数，如果默认值是不可变类型，那么多次调用函数是不会相互干扰的，如果默认值是可变参数，那么在调用函数时就要重新初始化可变参数，避免多次调用的相互干扰。</p>
<h3 id="5，可变参数"><a href="#5，可变参数" class="headerlink" title="5，可变参数"></a>5，可变参数</h3><p>可变参数就是允许定义能和多个实参相匹配的形参。当无法确定实参个数时，使用可变参数是最佳选择。定义可变参数有两种形式，具体说明如下。</p>
<h4 id="1，单星号形参"><a href="#1，单星号形参" class="headerlink" title="1，单星号形参"></a>1，单星号形参</h4><p>当定义参数时，在形参名称前添加一个星号前缀，就可以定义一个可变的位置参数，其语法格式如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">def 函数名(*param):</span><br><span class="line">	pass</span><br></pre></td></tr></table></figure>
<p>声明一个类似*param的可变参数时，从此处开始直到结束的所有位置参数都将被收集，并汇集成一个名为param的元组中。在函数体内可以使用for语句循环遍历param对象，读取每个元素，实现对可变位置参数的读取。</p>
<p>示例一：定义一个求和函数，能够把参数中所有数字进行相加并返回。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">num</span>(<span class="params">*sums</span>):</span><br><span class="line">	i = <span class="number">0</span></span><br><span class="line">	<span class="keyword">for</span> i <span class="keyword">in</span> nums:</span><br><span class="line">		<span class="keyword">if</span>(<span class="built_in">isinstance</span>(n,(<span class="built_in">int</span>,<span class="built_in">float</span>))):</span><br><span class="line">        	i += n</span><br><span class="line">    <span class="keyword">return</span> i</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">sum</span>(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>))			<span class="comment">#输出为10</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">sum</span>(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="string">&quot;a&quot;</span>,<span class="string">&quot;b&quot;</span>))	 <span class="comment">#输出为10</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">sum</span>(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4.4</span>,<span class="number">5.67</span>))	 <span class="comment">#输出为13.3700000000001</span></span><br></pre></td></tr></table></figure>
<p>使用可变参数进行参数传递，设计求和函数会显得非常的方便。</p>
<p>python也允许传入单星号实参。在调用函数时，当在实参前添加星号（*）前缀，python会自动遍历该参数对像，提取所有元素，并按顺序转换为位置参数。因此，要确保被添加星号的实参是可迭代对像。这个过程也被称为解包位置参数。</p>
<p>示例二：调用函数sum()，并传入可遍历数据对像</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">num</span>(<span class="params">*nums</span>):</span><br><span class="line">	i = <span class="number">0</span></span><br><span class="line">	<span class="keyword">for</span> n <span class="keyword">in</span> nums:</span><br><span class="line">	    <span class="keyword">if</span>(<span class="built_in">isinstance</span>(n,(<span class="built_in">int</span>,<span class="built_in">float</span>))):</span><br><span class="line">             i += n</span><br><span class="line">			 </span><br><span class="line">    <span class="keyword">return</span> i</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">a = (<span class="number">2</span>,<span class="number">4</span>,<span class="number">6</span>,<span class="number">8</span>,<span class="number">10</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">sum</span>(*a,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">1</span>))			<span class="comment">#输出为10</span></span><br><span class="line">b = [(<span class="number">2</span>,<span class="number">4</span>,<span class="number">6</span>,<span class="number">8</span>,<span class="number">10</span>)]</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">sum</span>(*b,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">1</span>))	 <span class="comment">#输出为10</span></span><br><span class="line">c = &#123;<span class="number">2</span>,<span class="number">4</span>,<span class="number">6</span>,<span class="number">8</span>,<span class="number">10</span>&#125;</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">sum</span>((*c,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">1</span>))	 <span class="comment">#输出为13.3700000000001</span></span><br><span class="line">d = &#123;<span class="number">2</span>:<span class="string">&quot;a&quot;</span>,<span class="number">4</span>:<span class="string">&quot;b&quot;</span>,<span class="number">6</span>:<span class="string">&quot;c&quot;</span>,<span class="number">8</span>:<span class="string">&quot;d&quot;</span>,<span class="number">10</span>:<span class="string">&quot;e&quot;</span>&#125;</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">sum</span>(*d,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">1</span>))</span><br></pre></td></tr></table></figure>
<h4 id="2，双星号形参"><a href="#2，双星号形参" class="headerlink" title="2，双星号形参"></a>2，双星号形参</h4><p>当定义函数时，在形参名称前面添加两个星号前缀，就可以定义一个可变的关键字参数，其语法格式如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">def 函数名(**param):</span><br><span class="line">	pass</span><br></pre></td></tr></table></figure>
<p>声明一个类似*param的可变参数时，从此处开始直到结束的所有位置参数都将被收集，并汇集成一个名为param的字典中。在函数体内可以使用for语句循环遍历param对象，读取每个元素，实现对可变位置参数的读取。</p>
<p>示例三：定义一个求和函数，能够接受关键字传递的参数，并把所有键，值进行汇总，如果值为数字，则叠加并记录，最后反回一个元组，包含可汇总的键的列表，以及汇总值的和。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">sum</span>(<span class="params">**nums</span>):</span><br><span class="line">	i = <span class="number">0</span></span><br><span class="line">	temp = []</span><br><span class="line">	<span class="keyword">for</span> keys,value <span class="keyword">in</span> nums.items():</span><br><span class="line">		<span class="keyword">if</span> (<span class="built_in">isinstance</span>(value,(<span class="built_in">int</span>,<span class="built_in">float</span>))):</span><br><span class="line">			i += value</span><br><span class="line">			temp.append(keys)</span><br><span class="line">	<span class="keyword">return</span> (temp,i)</span><br><span class="line">a = <span class="built_in">sum</span>(a=<span class="number">1</span>,b=<span class="number">2</span>,c=<span class="number">3</span>,d=<span class="number">4</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot; + &quot;</span>.join(a[<span class="number">0</span>]),<span class="string">&quot;=&quot;</span>,a[<span class="number">1</span>])</span><br></pre></td></tr></table></figure>
<p>python也允许传入双星号实参。在调用函数时，当在实参前添加双星号（**）前缀，python会自动遍历该参数对像，提取所有元素，并按顺序转换为关键字参数。因此，要确保被添加双星号的实参为字典对像。这个过程也被称为解包关键字参数。</p>
<p>示例四：针对示例三，先定义一个字典对象，然后再调用函数sum()，并传入字典对象作为可变参数，则也可以得到相同的结果。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">sum</span>(<span class="params">**nums</span>):</span><br><span class="line">    i = <span class="number">0</span></span><br><span class="line">    temp = []</span><br><span class="line">    <span class="keyword">for</span> keys,value <span class="keyword">in</span> nums.items():</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">isinstance</span>(value,(<span class="built_in">int</span>,<span class="built_in">float</span>))):</span><br><span class="line">            i += value</span><br><span class="line">            temp.append(keys)</span><br><span class="line">    <span class="keyword">return</span> (temp,i)</span><br><span class="line"></span><br><span class="line">d = &#123;<span class="string">&quot;a&quot;</span>:<span class="number">1</span>,<span class="string">&quot;b&quot;</span>:<span class="number">2</span>,<span class="string">&quot;c&quot;</span>:<span class="number">3</span>,<span class="string">&quot;d&quot;</span>:<span class="number">4</span>&#125;</span><br><span class="line">a = <span class="built_in">sum</span>(**d)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot; + &quot;</span>.join(a[<span class="number">0</span>]),<span class="string">&quot;=&quot;</span>,a[<span class="number">1</span>])</span><br></pre></td></tr></table></figure>
<p>示例五：利用可变参数可以定义创建字典对象的函数</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">dict</span>(<span class="params">**kwargs</span>):</span><br><span class="line">	<span class="keyword">return</span> kwargs</span><br><span class="line"></span><br><span class="line">d = <span class="built_in">dict</span>(a=<span class="number">1</span>,b=<span class="number">2</span>,c=<span class="number">3</span>,d=<span class="number">4</span>,e=<span class="number">5</span>)</span><br><span class="line"><span class="built_in">print</span>(d)</span><br></pre></td></tr></table></figure>
<h3 id="6，混合使用参数"><a href="#6，混合使用参数" class="headerlink" title="6，混合使用参数"></a>6，混合使用参数</h3><p>位置参数、默认参数，关键字参数和可变参数可以混合使用。混用时的位置顺序如下：</p>
<p>在定义函数时，形参位置顺序：位置参数在前，默认参数在后</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(位置参数，默认参数，可变位置参数，可变关键字参数)     #默认参数会被重置</span><br><span class="line">（位置参数，可变位置参数，默认参数，可变关键字参数）    #默认参数保持默认</span><br></pre></td></tr></table></figure>
<p>在调用函数时，实参位置顺序：位置参数在前，关键字参数在后。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#推荐顺序</span><br><span class="line">（位置参数，关键字参数，可变位置参数，可变关键字参数）</span><br><span class="line">（位置参数，可变位置参数，关键字参数，可变关键字参数）</span><br><span class="line"></span><br><span class="line">#可选顺序</span><br><span class="line">（可变位置参数，位置参数，关键字参数，可变关键字参数）</span><br><span class="line">（位置参数，可变位置参数，可变关键字参数，关键字参数）</span><br><span class="line">（可变位置参数，位置参数，可变关键字参数，关键字参数）</span><br></pre></td></tr></table></figure>
<p>示例一：定义一个函数，包含位置参数和默认参数，在调用函数时，使用位置参数和关键字参数。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">f</span>(<span class="params">name,age,sex=<span class="number">1</span></span>):</span><br><span class="line">	<span class="built_in">print</span>(<span class="string">&quot;name=&quot;</span>,name,end=<span class="string">&quot; &quot;</span>)</span><br><span class="line">	<span class="built_in">print</span>(<span class="string">&quot;age=&quot;</span>,age,end=<span class="string">&quot; &quot;</span>)</span><br><span class="line">	<span class="built_in">print</span>(<span class="string">&quot;sex=&quot;</span>,sex)</span><br><span class="line"></span><br><span class="line">f(<span class="string">&#x27;zhangsan&#x27;</span>,<span class="number">25</span>,<span class="number">0</span>)</span><br><span class="line">f(age=<span class="number">25</span>,name= <span class="string">&#x27;zhangsan&#x27;</span>)</span><br><span class="line">f(age=<span class="number">25</span>,sex=<span class="number">0</span>,name=<span class="string">&#x27;zhangsan&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>示例二：可变位置参数和可变关键字参数混用：可变参数在前，可变关键字参数在后。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">f</span>(<span class="params">*args,**kwargs</span>):</span><br><span class="line">	<span class="built_in">print</span>(<span class="string">&quot;args=&quot;</span>,args,end=<span class="string">&quot; &quot;</span>)</span><br><span class="line">	<span class="built_in">print</span>(<span class="string">&quot;kwargs=&quot;</span>,kwargs)</span><br><span class="line">	</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    f(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>)</span><br><span class="line">    f(a=<span class="number">1</span>,b=<span class="number">2</span>,c=<span class="number">3</span>)</span><br><span class="line">    f(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,a=<span class="number">1</span>,b=<span class="number">2</span>,c=<span class="number">3</span>)</span><br><span class="line">    f(<span class="string">&#x27;a&#x27;</span>,<span class="number">1</span>,<span class="literal">None</span>,a=<span class="number">1</span>,b=<span class="string">&#x27;2&#x27;</span>,c=<span class="number">3</span>)</span><br><span class="line">    </span><br><span class="line"> 运行结果：</span><br><span class="line">args= (<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>) kwargs= &#123;&#125;</span><br><span class="line">args= () kwargs= &#123;<span class="string">&#x27;a&#x27;</span>: <span class="number">1</span>, <span class="string">&#x27;b&#x27;</span>: <span class="number">2</span>, <span class="string">&#x27;c&#x27;</span>: <span class="number">3</span>&#125;</span><br><span class="line">args= (<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>) kwargs= &#123;<span class="string">&#x27;a&#x27;</span>: <span class="number">1</span>, <span class="string">&#x27;b&#x27;</span>: <span class="number">2</span>, <span class="string">&#x27;c&#x27;</span>: <span class="number">3</span>&#125;</span><br><span class="line">args= (<span class="string">&#x27;a&#x27;</span>, <span class="number">1</span>, <span class="literal">None</span>) kwargs= &#123;<span class="string">&#x27;a&#x27;</span>: <span class="number">1</span>, <span class="string">&#x27;b&#x27;</span>: <span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;c&#x27;</span>: <span class="number">3</span>&#125;</span><br></pre></td></tr></table></figure>
<p>示例三：可变位置参数与位置参数和默认参数混合使用</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#可变位置参数放在位置参数的后面，默认参数放在所有参数的最后</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">f</span>(<span class="params">x,*args,a=<span class="number">4</span></span>):</span><br><span class="line">	<span class="built_in">print</span>(<span class="string">&quot;x=&quot;</span>,x,end=<span class="string">&quot; &quot;</span>)</span><br><span class="line">	<span class="built_in">print</span>(<span class="string">&quot;a=&quot;</span>,a,end=<span class="string">&quot; &quot;</span>)</span><br><span class="line">	<span class="built_in">print</span>(<span class="string">&quot;args=&quot;</span>,args)</span><br><span class="line"><span class="comment">#调用函数</span></span><br><span class="line">f(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>,a=<span class="number">100</span>)</span><br><span class="line">f(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>)</span><br><span class="line"></span><br><span class="line">运行结果：</span><br><span class="line">x= <span class="number">1</span> a= <span class="number">100</span> args= (<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>)</span><br><span class="line">x= <span class="number">1</span> a= <span class="number">4</span> args= (<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#可变位置参数放在所有的参数的最后，默认参数放在位置参数的后面</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">f</span>(<span class="params">x,a=<span class="number">4</span>,*args</span>):</span><br><span class="line">	<span class="built_in">print</span>(<span class="string">&quot;x=&quot;</span>,x,end=<span class="string">&quot; &quot;</span>)</span><br><span class="line">	<span class="built_in">print</span>(<span class="string">&quot;a=&quot;</span>,a,end=<span class="string">&quot; &quot;</span>)</span><br><span class="line">	<span class="built_in">print</span>(<span class="string">&quot;args=&quot;</span>,args)</span><br><span class="line">	</span><br><span class="line">f(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>)</span><br><span class="line">f(<span class="number">1</span>,*(<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">运行结果：</span><br><span class="line">x= <span class="number">1</span> a= <span class="number">2</span> args= (<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>)</span><br><span class="line">x= <span class="number">1</span> a= <span class="number">2</span> args= (<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>)</span><br></pre></td></tr></table></figure>
<p>示例4：可变关键字参数与位置参数和默认参数混合使用。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#默认参数要放在位置参数的后面，可变关键字参数放在最后。</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">f</span>(<span class="params">x,a=<span class="number">4</span>,**kwargs</span>):</span><br><span class="line">	<span class="built_in">print</span>(<span class="string">&quot;x=&quot;</span>,x,end=<span class="string">&quot; &quot;</span>)</span><br><span class="line">	<span class="built_in">print</span>(<span class="string">&quot;a=&quot;</span>,a,end=<span class="string">&quot; &quot;</span>)</span><br><span class="line">	<span class="built_in">print</span>(<span class="string">&quot;kwargs=&quot;</span>,kwargs)</span><br><span class="line">	</span><br><span class="line">f(<span class="number">1</span>,y=<span class="number">2</span>,z=<span class="number">3</span>)</span><br><span class="line">f(<span class="number">1</span>,<span class="number">5</span>,y=<span class="number">2</span>,z=<span class="number">3</span>)</span><br></pre></td></tr></table></figure>
<p>【注意】默认参数不能放在可变关键字参数的后面，否则将抛弃语法错误。</p>
<p>示例五：位置参数，默认参数，可变位置参数和可变关键字参数混用</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#如果要保持使用默认参数的默认值时，默认参数的位置应该位于可变位置参数之后。</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">f</span>(<span class="params">x,*args,a=<span class="number">4</span>,**kwargs</span>):</span><br><span class="line">	<span class="built_in">print</span>(<span class="string">&quot;x=&quot;</span>,x,end=<span class="string">&quot; &quot;</span>)</span><br><span class="line">	<span class="built_in">print</span>(<span class="string">&quot;a=&quot;</span>,a,end=<span class="string">&quot; &quot;</span>)</span><br><span class="line">	<span class="built_in">print</span>(<span class="string">&quot;args=&quot;</span>,args,end=<span class="string">&quot; &quot;</span>)</span><br><span class="line">	<span class="built_in">print</span>(<span class="string">&quot;kwargs&quot;</span>,kwargs)</span><br><span class="line">	</span><br><span class="line"><span class="comment">#直接传递值</span></span><br><span class="line">f(<span class="number">1</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,y=<span class="number">2</span>,z=<span class="number">3</span>)</span><br><span class="line"><span class="comment">#传递可变参数</span></span><br><span class="line">f(<span class="number">1</span>,*(<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>),**(<span class="string">&quot;y&quot;</span>:<span class="number">2</span>,<span class="string">&quot;z&quot;</span>:<span class="number">3</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">#当需要修改默认参数的默认值时，默认参数应该放在可变位置参数之前，位置参数之后。</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">f</span>(<span class="params">x,a=<span class="number">4</span>,*args,**kwargs</span>):</span><br><span class="line">	<span class="built_in">print</span>(<span class="string">&quot;x=&quot;</span>,x,end=<span class="string">&quot; &quot;</span>)</span><br><span class="line">	<span class="built_in">print</span>(<span class="string">&quot;a=&quot;</span>,a,end=<span class="string">&quot; &quot;</span>)</span><br><span class="line">	<span class="built_in">print</span>(<span class="string">&quot;args=&quot;</span>,args,end=<span class="string">&quot; &quot;</span>)</span><br><span class="line">	<span class="built_in">print</span>(<span class="string">&quot;kwargs=&quot;</span>,kwargs)</span><br><span class="line">	</span><br><span class="line"><span class="comment">#直接传递值</span></span><br><span class="line">f(<span class="number">1</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,y=<span class="number">2</span>,z=<span class="number">3</span>)</span><br><span class="line"><span class="comment">#传递可变参数</span></span><br><span class="line">f(<span class="number">1</span>,<span class="number">5</span>,<span class="number">6</span>,*(<span class="number">7</span>,<span class="number">8</span>),**(<span class="string">&quot;y&quot;</span>:<span class="number">2</span>,<span class="string">&quot;z&quot;</span>:<span class="number">3</span>))</span><br></pre></td></tr></table></figure>
<h3 id="7，函数的返回值"><a href="#7，函数的返回值" class="headerlink" title="7，函数的返回值"></a>7，函数的返回值</h3><p>在python函数体内，使用return语句可以设置函数的放回值，语法格式如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">return [表达式]</span><br></pre></td></tr></table></figure>
<p>【注意】如果一个函数没有return语句，其是他有一个隐含的return语句，返回值是False，类型是NoneType。与return或则return none等价，都是返回none。</p>
<p>示例一：以下三个返回值返回none。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">def f1():</span><br><span class="line">	pass</span><br><span class="line">	</span><br><span class="line">def f2():</span><br><span class="line">	return </span><br><span class="line">	</span><br><span class="line">def f3():</span><br><span class="line">	return none</span><br><span class="line">	</span><br><span class="line"></span><br><span class="line">print(f1())</span><br><span class="line">print(f2())</span><br><span class="line">print(f3())</span><br></pre></td></tr></table></figure>
<p>retun语句还结束函数调用的功能。</p>
<p>示例2：把return语句放在函数体内第二行，这将导致return语句后免得语句无法被执行，因此仅看到1语句被执行，而3语句无法被执行。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">def f():</span><br><span class="line">	print(1)</span><br><span class="line">	return </span><br><span class="line">	print(3)</span><br><span class="line">f()</span><br></pre></td></tr></table></figure>
<p>在函数体内可以设置多条return语句，但是只有一条语句被执行。如果没有任一一条被执行，那么就会隐式调用的return None语句作为返回值。</p>
<p>示例三：在排序函数中，经常会用到以下设置，通过比较两个函数的大小，确定他们排序顺序。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">def f(x,y):</span><br><span class="line">	if x &lt; y:</span><br><span class="line">		return 1</span><br><span class="line">	if x &gt;= y:</span><br><span class="line">		return -1</span><br><span class="line">	else:</span><br><span class="line">		return 0</span><br><span class="line">		</span><br><span class="line">print(1,2)</span><br><span class="line">print(3,2)</span><br></pre></td></tr></table></figure>
<p>函数的返回值可以是任意类型，但是返回值只能是单值，值可以是包含多个元素的对象，如列表，字典等，因此要返回多个值，可以考虑把多个值放到列表中，元组，字典等对象中再放回。</p>
<p>示例4：在本示例中，虽然return语句后面跟随多个值，但是python会把他们隐式封装起来成为一个元组对象返回。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">def f():</span><br><span class="line">	return 1,2,3,4</span><br><span class="line">print(f())</span><br></pre></td></tr></table></figure>
<h2 id="3，匿名函数"><a href="#3，匿名函数" class="headerlink" title="3，匿名函数"></a>3，匿名函数</h2><h3 id="1，定义匿名函数"><a href="#1，定义匿名函数" class="headerlink" title="1，定义匿名函数"></a>1，定义匿名函数</h3><p>在python中，使用lamda运算符可以定义匿名函数，语法格式如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fn = lamda [arg1 [arg2,...,argn]]:expression</span><br></pre></td></tr></table></figure>
<p>具体说明：</p>
<p>[arg1 [arg2,…,argn]]：可选参数，表示匿名函数的参数，参数的个数不限，参数之间通过逗号分隔；</p>
<p>expression:表示必选参数，为一个表达式定义函数体，并能够访问冒号左侧的参数</p>
<p>fn:表示一个变量，用来接收lamda表达式的返回值，返回值为一个匿名函数对象，通过fn变量可以调用lamda函数。</p>
<p>lamda是一个表达式，而不是一个语句块，它具有以下的几个特点：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#与def语句的语法相比较，lamda不需要小括号，冒号(:)左侧的值表示函数体的参数，函数不需要return语句，冒号右侧表达式的运算结果就是返回值。</span><br><span class="line">#与def语句的功能相比较，lamda的结构单一，功能有限。lamda的主体是一个表达式，而不是一个语句块，因此不能包含各种指令，如for,if,while等结构化语句，仅能使用在lamda表达式中封装有限的运算逻辑。</span><br></pre></td></tr></table></figure>
<p>lamda表达式也会产生一个新的局部作用域，拥有独立的命名空间。在def定义的函数中嵌套lamda表达式，lamda表达式可以访问外层的def定义的函数中可用的变量。</p>
<p>示例一：定义一个无参匿名函数，直接返回一个固定值</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">t = lamda :<span class="literal">True</span></span><br><span class="line">t()</span><br></pre></td></tr></table></figure>
<p>等价于def func()：return True</p>
<p>示例二：定义一个带参数的匿名函数，用来求两个数字之和。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#求和匿名函数</span></span><br><span class="line"><span class="built_in">sum</span> = lamda a,b: a + b    <span class="comment">#直接赋值给变量，然后像普通函数一样调用。</span></span><br><span class="line"><span class="comment">#调用匿名函数</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">sum</span>(<span class="number">10</span>,<span class="number">20</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">sum</span>(<span class="number">20</span>,<span class="number">20</span>))</span><br></pre></td></tr></table></figure>
<p>其中，Sum=lambda a,b:a+b就等效于def sum(a,b):return a+b</p>
<p>示例三：通过一行代码把字符串中的各种空字符转换为空格</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print((lambda s:&#x27; &#x27;.join(s.split()))(&quot;this is\na\ttest&quot;))</span><br></pre></td></tr></table></figure>
<p>输出为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">this is a test</span><br></pre></td></tr></table></figure>
<p>上面一行代码等价于：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">s = <span class="string">&quot;this is\na\ttest&quot;</span></span><br><span class="line">s=<span class="string">&#x27; &#x27;</span>.join(s.split())</span><br><span class="line"><span class="built_in">print</span>(s)</span><br></pre></td></tr></table></figure>
<p>示例四：在匿名函数中设置默认值</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">c= <span class="keyword">lambda</span> x,y=<span class="number">2</span>:x+y</span><br><span class="line"><span class="built_in">print</span>(c(<span class="number">10</span>))</span><br></pre></td></tr></table></figure>
<p>示例五：</p>
<p>快速转换为字典对象</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">c = <span class="keyword">lambda</span> **arg:arg</span><br><span class="line">d = c(a=<span class="number">1</span>,b=<span class="number">2</span>,c=<span class="number">3</span>)</span><br><span class="line"><span class="built_in">print</span>(d)</span><br></pre></td></tr></table></figure>
<p>示例六：通过匿名函数设置字典排序的主键</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">infors = [</span><br><span class="line">	&#123;<span class="string">&quot;name&quot;</span>:<span class="string">&quot;a&quot;</span>,<span class="string">&quot;age&quot;</span>:<span class="number">15</span>&#125;,</span><br><span class="line">	&#123;<span class="string">&quot;name&quot;</span>:<span class="string">&quot;b&quot;</span>,<span class="string">&quot;age&quot;</span>:<span class="number">20</span>&#125;,</span><br><span class="line">	&#123;<span class="string">&quot;name&quot;</span>:<span class="string">&quot;c&quot;</span>,<span class="string">&quot;age&quot;</span>:<span class="number">10</span>&#125;</span><br><span class="line">]</span><br><span class="line">infors.sort(key=<span class="keyword">lambda</span> x:x[<span class="string">&#x27;age&#x27;</span>])</span><br><span class="line"><span class="built_in">print</span>(infors)</span><br><span class="line"></span><br><span class="line">运行结果：</span><br><span class="line">[&#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">10</span>&#125;, &#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">15</span>&#125;, &#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">20</span>&#125;]</span><br></pre></td></tr></table></figure>
<p>示例七：通过匿名函数设置一个高阶函数</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">def test(a,b,func):</span><br><span class="line">	return func(a,b)</span><br><span class="line">	</span><br><span class="line">num =test(34,26,lambda x,y:x-y)</span><br><span class="line">print(num)</span><br></pre></td></tr></table></figure>
<p>示例八：通过匿名函数过滤出能够被3整除的元素</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">d=[1,2,4,67,85,34,45,100,456,34]</span><br><span class="line">d = filter(lambda x:x%3==0,d)</span><br><span class="line">print(list(d))</span><br></pre></td></tr></table></figure>
<p>【提示】</p>
<p>过滤器函数fliter(function,iterable)包含两个参数，参数function是筛选函数，参数iterable是可迭代对象。filter()可以从序列中过滤出符合条件的元素，d=filter(lambda x:x%3==0,d)的含义就是从序列中筛选出符合函数lambda x:x%3==0的新序列。</p>
<h3 id="2，序列处理函数和lambda表达式"><a href="#2，序列处理函数和lambda表达式" class="headerlink" title="2，序列处理函数和lambda表达式"></a>2，序列处理函数和lambda表达式</h3><p>使用序列处理函数来操作序列对象，包括filter()，map()，reduce()和sorted()。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">filter(function,iterable):根据函数过滤函数</span><br><span class="line">map(function,iterable,...):根据函数映射一个新的序列</span><br><span class="line">reduce(function,iterable[,initalizer]):根据函数对元素执行汇总计算，并返回汇总的值。</span><br><span class="line">sorted(iterable,key=funtion,reverse=False):根据函数对元素进行排序</span><br></pre></td></tr></table></figure>
<p>在python2中reduce()是内置函数，而在python3中归为functools模块，因此需要导入该模块。</p>
<p>案例完整代码如下所示，演示效果如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> reduce</span><br><span class="line">d = [<span class="number">1</span>,-<span class="number">2</span>,<span class="number">4</span>,<span class="number">67</span>,-<span class="number">85</span>,<span class="number">34</span>,<span class="number">45</span>,-<span class="number">100</span>,<span class="number">456</span>,-<span class="number">34</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">#map映射一个序列</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>(<span class="built_in">map</span>(<span class="keyword">lambda</span> x:x*<span class="number">2</span>+<span class="number">5</span>,d)))</span><br><span class="line"><span class="built_in">print</span>([x*<span class="number">2</span>+<span class="number">5</span> <span class="keyword">for</span> x <span class="keyword">in</span> d])</span><br><span class="line"></span><br><span class="line"><span class="comment">#map映射两个序列</span></span><br><span class="line">map_list1=<span class="built_in">map</span>(<span class="keyword">lambda</span> x,y:x * y + <span class="number">1</span>,[<span class="number">10</span>,<span class="number">9</span>,<span class="number">8</span>,<span class="number">7</span>,<span class="number">6</span>],[<span class="number">5</span>,<span class="number">4</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">1</span>])</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>[map_list1])</span><br><span class="line"></span><br><span class="line"><span class="comment">#当两个序列长度不一样时，以最短的长度序列为准</span></span><br><span class="line">map_list2 = <span class="built_in">map</span>(<span class="keyword">lambda</span> x,y:x * y + <span class="number">1</span>,[<span class="number">10</span>,<span class="number">9</span>,<span class="number">8</span>,<span class="number">7</span>,<span class="number">6</span>],[<span class="number">5</span>,<span class="number">4</span>,<span class="number">3</span>,<span class="number">2</span>])</span><br><span class="line"><span class="built_in">print</span>(map_list2)</span><br><span class="line"></span><br><span class="line"><span class="comment">#filter过滤序列</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>(<span class="built_in">filter</span>(<span class="keyword">lambda</span> x:x%<span class="number">3</span>==<span class="number">0</span>,d)))</span><br><span class="line"><span class="built_in">print</span>([x <span class="keyword">for</span> x <span class="keyword">in</span> d <span class="keyword">if</span> x%<span class="number">3</span> ==<span class="number">0</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment">#reduce汇总序列</span></span><br><span class="line"><span class="built_in">print</span>(reduce(<span class="keyword">lambda</span> x,y:x+y,[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]))</span><br><span class="line"><span class="built_in">print</span>(reduce(<span class="keyword">lambda</span> x,y:x+y,d))</span><br><span class="line"><span class="built_in">print</span>(reduce(<span class="keyword">lambda</span> x,y:x+y,d,<span class="number">4</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">#sorted排序序列</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">sorted</span>(d,key=<span class="keyword">lambda</span> x:<span class="built_in">abs</span>(x)))</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">运算结果：</span><br><span class="line">[<span class="number">7</span>, <span class="number">1</span>, <span class="number">13</span>, <span class="number">139</span>, -<span class="number">165</span>, <span class="number">73</span>, <span class="number">95</span>, -<span class="number">195</span>, <span class="number">917</span>, -<span class="number">63</span>]</span><br><span class="line">[<span class="number">7</span>, <span class="number">1</span>, <span class="number">13</span>, <span class="number">139</span>, -<span class="number">165</span>, <span class="number">73</span>, <span class="number">95</span>, -<span class="number">195</span>, <span class="number">917</span>, -<span class="number">63</span>]</span><br><span class="line"><span class="built_in">list</span>[&lt;<span class="built_in">map</span> <span class="built_in">object</span> at <span class="number">0x00000284A74946A0</span>&gt;]</span><br><span class="line">&lt;<span class="built_in">map</span> <span class="built_in">object</span> at <span class="number">0x00000284A7496020</span>&gt;</span><br><span class="line">[<span class="number">45</span>, <span class="number">456</span>]</span><br><span class="line">[<span class="number">45</span>, <span class="number">456</span>]</span><br><span class="line"><span class="number">6</span></span><br><span class="line"><span class="number">386</span></span><br><span class="line"><span class="number">390</span></span><br><span class="line">[<span class="number">1</span>, -<span class="number">2</span>, <span class="number">4</span>, <span class="number">34</span>, -<span class="number">34</span>, <span class="number">45</span>, <span class="number">67</span>, -<span class="number">85</span>, -<span class="number">100</span>, <span class="number">456</span>]</span><br></pre></td></tr></table></figure>
<h2 id="4，变量作用域"><a href="#4，变量作用域" class="headerlink" title="4，变量作用域"></a>4，变量作用域</h2><p>变量作用域是指变量（scop）是指变量在程序中可以被访问的有效范围，也成为命名空间、变量的可见性。python的作用域是静态的，在源代码中定义变量的位置决定了该变量能够被访问的范围，即python变量的作用域由变量所在源代码中的位置决定。</p>
<h3 id="1，定义作用域"><a href="#1，定义作用域" class="headerlink" title="1，定义作用域"></a>1，定义作用域</h3><p>在python中，并不是所有的语句块中都会产生作用域。只有模块、类、函数才会产生作用域。</p>
<p>【示例】分别使用class和def创建作用域，并演示访问作用域内变量的方法</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">C</span>():</span><br><span class="line">	n=<span class="number">1</span></span><br><span class="line">	</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">f</span>():</span><br><span class="line">	n=<span class="number">2</span></span><br><span class="line">	<span class="built_in">print</span>(n)</span><br><span class="line">	</span><br><span class="line"><span class="built_in">print</span>(C.n)</span><br><span class="line">f()</span><br><span class="line"><span class="built_in">print</span>(n)</span><br></pre></td></tr></table></figure>
<p>在作用域中定义的变量，一般只能在作用域内可见，不允许在作用域外直接访问</p>
<p>【提示】</p>
<p>在条件，循环，异常处理，上下文管理器等语句块中不会创建作用域。</p>
<h3 id="2，作用于类型"><a href="#2，作用于类型" class="headerlink" title="2，作用于类型"></a>2，作用于类型</h3><p>在python中，作用域可以分为四种类型，简单的说就是</p>
<h4 id="1，L（local）级：局部作用域"><a href="#1，L（local）级：局部作用域" class="headerlink" title="1，L（local）级：局部作用域"></a>1，L（local）级：局部作用域</h4><p>每当函数被调用时都会创建一个新的局部作用域，包括def函数和lambda表达式函数。如果是递归的函数，每次被调用都会创建一个新的局部变量域。在函数体内，除非使用global关键字声明变量的作用域为全局作用域，否则默认都为局部变量。局部作用于不会持续存在，存在的时间依赖与函数的生命周期。所以，一般建议都尽量避免定义全局变量，因为全局变量在模块运行的过程中会一直存在，占据着内存。</p>
<h4 id="2，E-enclosing-级：嵌套作用域"><a href="#2，E-enclosing-级：嵌套作用域" class="headerlink" title="2，E(enclosing)级：嵌套作用域"></a>2，E(enclosing)级：嵌套作用域</h4><p>嵌套作用域也是函数作用域，与局部作用域是相对关系。相对于上一层的函数而言，嵌套作用域也是局部作用域。对于一个函数而言，L表示定义在该函数内部的局部作用域，而E表示是定义在此函数的上一层父级函数中的局部作用域。</p>
<h4 id="3，G（global）级：全局变量"><a href="#3，G（global）级：全局变量" class="headerlink" title="3，G（global）级：全局变量"></a>3，G（global）级：全局变量</h4><p>每一个模块都是一个全局作用域，在模块中声明的变量都具有全局作用域。从外部来看，全局变量就是一个模块对象中的属性。</p>
<p>【注意】全局作用域的作用范围仅限于单个模块文件内</p>
<h4 id="4，B（bulit-in）级：内置作用域"><a href="#4，B（bulit-in）级：内置作用域" class="headerlink" title="4，B（bulit-in）级：内置作用域"></a>4，B（bulit-in）级：内置作用域</h4><p>在系统内置模块里定义的变量，如预定义在bulit-in模块内的变量。</p>
<h3 id="3，LEGB解析规则"><a href="#3，LEGB解析规则" class="headerlink" title="3，LEGB解析规则"></a>3，LEGB解析规则</h3><p>变量名的LEGB解析规则：当在函数中使用未确定的变量名时，Python会按照优先级依次搜索4个作用域，以此来确定该变量名的意义。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">局部作用域&gt;嵌套作用域&gt;全局作用域&gt;内置作用域</span><br></pre></td></tr></table></figure>
<p>具体解析步骤如下：</p>
<p>第1步，在局部作用域（L）中搜索变量。</p>
<p>第2步，如果在局部作用域中没有找到变量，则跳转到上一层嵌套结构中，访问def或lambda函数的嵌套作用域（E）。</p>
<p>第3步，如果在函数作用域中没有找到同名变量，则向上访问全局作用域（G）</p>
<p>第4步，如果在全局作用域中也没有找到同名变量，最后访问内置函数作用域（B）</p>
<p>根据上述顺序，在第一处找到的位置停止搜索，并读取变量的值。如果在整个作用域链上都没有找到，则会抛出NameError异常。</p>
<p>示例一：比较全局作用域和局部作用域的优先级关系。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">n = <span class="number">1</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">f</span>():</span><br><span class="line">	n=<span class="number">2</span></span><br><span class="line">	<span class="built_in">print</span>(n)</span><br><span class="line">f()</span><br><span class="line"><span class="built_in">print</span>(n)</span><br></pre></td></tr></table></figure>
<p>输出为</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">2</span><br><span class="line">1</span><br></pre></td></tr></table></figure>
<p>在上面的代码中，有一个全局变量n，值为1，在函数f()中定义布局变量n，值为2，在函数内部输出n变量时，会优先搜索局部作用域，所以打印输出2，在全局作用域打印n为1。</p>
<p>示例二：在示例1的基础上再添加一个嵌套作用域，然后比较局部作用域、嵌套作用域和全局作用域之间的优先级关系。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">n=<span class="number">1</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">f</span>():</span><br><span class="line">	n=<span class="number">2</span></span><br><span class="line">	<span class="built_in">print</span>(n)</span><br><span class="line">	<span class="keyword">def</span> <span class="title function_">sub</span>():</span><br><span class="line">		<span class="built_in">print</span>(n)</span><br><span class="line">	sub()</span><br><span class="line">f()</span><br><span class="line"><span class="built_in">print</span>(n)</span><br><span class="line"></span><br><span class="line">运行结果：</span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure>
<p>对于sub()函数来说，当前局部作用域中没有变量n，所以在L层找不到，然后在E层搜索，当在嵌套函数f()中找到变量后，就直接读取并打印输出，不再进一步搜索G层全局作用域。</p>
<p>示例三：在示例一基础上调整print(n)和n=2两条语句的顺序。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">n=<span class="number">1</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">f</span>():</span><br><span class="line">	<span class="built_in">print</span>(n)</span><br><span class="line">	n=<span class="number">2</span></span><br><span class="line">	</span><br><span class="line">f()</span><br><span class="line"><span class="built_in">print</span>(n)</span><br></pre></td></tr></table></figure>
<p>输出为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">发生异常: UnboundLocalError</span><br><span class="line">local variable &#x27;n&#x27; referenced before assignment</span><br></pre></td></tr></table></figure>
<p>在Python预编译期，局部变量n被定义，但没有赋值。当执行程序时，不会到全局作用域去搜索变量n。当使用print()打印变量n时，局部变量n并没有绑定对象，既没有被赋值，抛出变量在分配前被引用的错误。所以，在引用一个变量之前，一定要先赋值。 </p>
<p>为什么本例会触发UnboundLocalError异常，而不是NameError:name ‘n’ is not dedfind。Python模块代码在执行之前，并不会经过预编译，但是函数体代码在运行前会经过预编译，因此不管变量名绑定在哪个函数作用域上，都能被编译器知道。Python虽然是一个静态作用域语言，当变量访问是动态的，直到在程序运行时，才会发现变量引用问题。</p>
<p>示例4，在示例一基础上删除局部变量n=2</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">n=<span class="number">1</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">f</span>():</span><br><span class="line">	<span class="built_in">print</span>(n)</span><br><span class="line">f()</span><br><span class="line"><span class="built_in">print</span>(n)</span><br></pre></td></tr></table></figure>
<p>输出为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1</span><br><span class="line">1</span><br></pre></td></tr></table></figure>
<p>在上面的示例中，先访问局部作用域，没有找到变量n，所以在打印时直接找到了全局变量n，然后的读取并输出。</p>
<h3 id="4，跨越修改变量"><a href="#4，跨越修改变量" class="headerlink" title="4，跨越修改变量"></a>4，跨越修改变量</h3><p>一个非L层的变量相对于L层变量而言，默认是只读，而不能修改。如果希望在L层中修改定义在非L层的变量，可以为其绑定一个新的值，Python会认为是在当前的L中引入了一个新的变量，即便内外两个变量重名，却也有着不同的意义，而且在L层中修改新变量不会影响到非L层的变量。如果希望在L层中修改非L层中的变量，则可以使用global、nonlocal关键字。</p>
<h4 id="1，global关键字"><a href="#1，global关键字" class="headerlink" title="1，global关键字"></a>1，global关键字</h4><p>示例一：如果希望在L层中修改G层中的变量，可以使用global关键字。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">n = <span class="number">1</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">f</span>():</span><br><span class="line">	<span class="keyword">def</span> <span class="title function_">sub</span>():</span><br><span class="line">		<span class="keyword">global</span> n</span><br><span class="line">		<span class="built_in">print</span>(n)</span><br><span class="line">		n=<span class="number">2</span></span><br><span class="line">	<span class="keyword">return</span> sub</span><br><span class="line">f()()</span><br><span class="line"><span class="built_in">print</span>(n)</span><br><span class="line"></span><br><span class="line">输出为：</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br></pre></td></tr></table></figure>
<p>在上面代码中，使用global关键字之后，在sub()函数中使用的n变量就是全局作用域中的n变量，而不会新生成一个局部作用域中的n变量。</p>
<h4 id="2，nonlocal关键字"><a href="#2，nonlocal关键字" class="headerlink" title="2，nonlocal关键字"></a>2，nonlocal关键字</h4><p>使用nonlocal关键字可以实现在L层中修改E层中的变量。这时Python3新增的特性。</p>
<p>示例二：针对示例一，修改其中代码，把全局变量移到嵌套作用域中，然后使用nonlocal n命令在本地作用域中修改嵌套作用域中变量n的值。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">f</span>():</span><br><span class="line">	n = <span class="number">1</span></span><br><span class="line">	<span class="keyword">def</span> <span class="title function_">sub</span>():</span><br><span class="line">		<span class="keyword">nonlocal</span> n</span><br><span class="line">		n = <span class="number">2</span></span><br><span class="line">		<span class="built_in">print</span>(n)</span><br><span class="line">	sub()</span><br><span class="line">	<span class="built_in">print</span>(n)</span><br><span class="line">f()</span><br><span class="line"></span><br><span class="line">输出为：</span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">2</span></span><br></pre></td></tr></table></figure>
<p>在上面的代码中，由于声明了nonlocal，这样在sub()函数中使用的n变量就是E层（即f()函数中）声明的n变量，所以输出两个2。</p>
<h3 id="5，修改嵌套作用域变量"><a href="#5，修改嵌套作用域变量" class="headerlink" title="5，修改嵌套作用域变量"></a>5，修改嵌套作用域变量</h3><p>除了使用nonlocal关键字外，也可以使用列表等可变类型的容器间接修改嵌套作用域变量。本例比较演示这两种嵌套作用域变量的修改方法。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">#使用列表等可变容器包含待修改的值</span><br><span class="line">def demol():</span><br><span class="line">	x = 2</span><br><span class="line">	list1 = [x,]</span><br><span class="line">	def demo2():</span><br><span class="line">		list1[0] = list[0] + 1</span><br><span class="line">		return list1[0]</span><br><span class="line">	return demo2</span><br><span class="line">print(demo1()())</span><br><span class="line"></span><br><span class="line">#使用nonlocal关键字声明嵌套变量</span><br><span class="line">def func1():</span><br><span class="line">	x = 2</span><br><span class="line">	def func():</span><br><span class="line">		nonlocal x</span><br><span class="line">		x += 1</span><br><span class="line">		return x</span><br><span class="line">	return func2</span><br><span class="line">print(func1()())</span><br><span class="line">	</span><br></pre></td></tr></table></figure>
<h3 id="6，比较全局变量和局部变量"><a href="#6，比较全局变量和局部变量" class="headerlink" title="6，比较全局变量和局部变量"></a>6，比较全局变量和局部变量</h3><p>使用下面两个Python内置函数可以访问全局变量和局部变量。</p>
<p>globals():以字典类型返回当前位置的全部全局变量。</p>
<p>locals():以字典类型返回当前位置的全部局部变量。</p>
<p>【注意】</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">通过globals()和locals()返回的字典对象可以读，写全局变量和局部变量。</span><br></pre></td></tr></table></figure>
<p>下面案例简单比较了全局变量和局部变量的不同用法。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">d = <span class="number">4</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test1</span>(<span class="params">a,b</span>):</span><br><span class="line">	c = <span class="number">3</span></span><br><span class="line">	<span class="built_in">print</span>(<span class="string">&#x27;全局变量 d:&#x27;</span>,<span class="built_in">globals</span>() [<span class="string">&#x27;d&#x27;</span>])</span><br><span class="line">	<span class="built_in">print</span>(<span class="string">&#x27;局部变量集=&#123;0&#125;&#x27;</span>.<span class="built_in">format</span>(<span class="built_in">locals</span>()))</span><br><span class="line">	<span class="built_in">print</span>(<span class="string">&#x27;全局变量集=&#123;0&#125;&#x27;</span>.<span class="built_in">format</span>(<span class="built_in">globals</span>()))</span><br><span class="line">	d = <span class="number">5</span></span><br><span class="line">test(<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;globals variable d:%d&#x27;</span>%d)</span><br><span class="line"></span><br><span class="line">d = <span class="number">4</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test2</span>(<span class="params">a,b</span>):</span><br><span class="line">	c = <span class="number">3</span></span><br><span class="line">	<span class="keyword">global</span> d</span><br><span class="line">	<span class="built_in">print</span>(<span class="string">&#x27;全局变量d:%d&#x27;</span>%d)</span><br><span class="line">	<span class="built_in">print</span>(<span class="string">&quot;局部变量集=&#123;0&#125;&quot;</span>.<span class="built_in">format</span>(<span class="built_in">locals</span>()))</span><br><span class="line">	<span class="built_in">print</span>(<span class="string">&quot;全局变量集=&#123;0&#125;&quot;</span>.<span class="built_in">format</span>(<span class="built_in">globals</span>()))</span><br><span class="line">	d = <span class="number">5</span></span><br><span class="line">test2(<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;全局变量 d:%d&#x27;</span>%d)</span><br><span class="line">	</span><br></pre></td></tr></table></figure>
<p>运行结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">全局变量 d: 4</span><br><span class="line">局部变量集=&#123;&#x27;a&#x27;: 1, &#x27;b&#x27;: 2, &#x27;c&#x27;: 3&#125;</span><br><span class="line">全局变量集=&#123;&#x27;__name__&#x27;: &#x27;__main__&#x27;, &#x27;__doc__&#x27;: &#x27;\ndef abs(x):\n    &quot;&quot;&quot;\n    abs(float x)\n    功能：求绝对值\n    参数：x,为数字\n    返</span><br><span class="line">回值：x的绝对值\n    &quot;&quot;&quot;\n\n    if x &gt;= 0:\n        return x\n    else:\n        return -x\n    \nprint(abs(13))\n&#x27;, &#x27;__package__&#x27;: &#x27;&#x27;, </span><br><span class="line">&#x27;__loader__&#x27;: None, &#x27;__spec__&#x27;: None, &#x27;__file__&#x27;: &#x27;E:\\新建文件夹 (2)\\大三上学期\\网络应用开发python\\函数.py&#x27;, &#x27;__cached__&#x27;: None, &#x27;__builtins__&#x27;: &#123;&#x27;__name__&#x27;: &#x27;builtins&#x27;, &#x27;__doc__&#x27;: &quot;Built-in functions, exceptions, and other objects.\n\nNoteworthy: None is the `nil</span><br><span class="line"></span><br><span class="line">&gt;, &#x27;runfile&#x27;: &lt;function runfile at 0x000001EFDACBDAB0&gt;&#125;, &#x27;d&#x27;: 4, &#x27;test1&#x27;: &lt;function test1 at 0x000001EFDAF8AD40&gt;, &#x27;test2&#x27;: &lt;function test2 at 0x000001EFDAF8B490&gt;&#125;</span><br><span class="line">全局变量 d:5</span><br></pre></td></tr></table></figure>
<h2 id="5，闭包和装饰器"><a href="#5，闭包和装饰器" class="headerlink" title="5，闭包和装饰器"></a>5，闭包和装饰器</h2><p>Python支持函数闭包和装饰器的特性，它们都是特殊结构的嵌套函数，具有特殊功能和用途。</p>
<h3 id="1，定义闭包"><a href="#1，定义闭包" class="headerlink" title="1，定义闭包"></a>1，定义闭包</h3><p>闭包就是一个在函数调用时所产生的，持续存在的上下文活动对象。</p>
<h4 id="1，形成原理"><a href="#1，形成原理" class="headerlink" title="1，形成原理"></a>1，形成原理</h4><p>函数被调用时，会产生一个临时的上下文活动对象（namespace），他是函数作用域的顶级对象，作用域内所有局部变量，参数，内层函数等都将作为上下文活动对象的属性而存在。</p>
<p>在默认情况下，当调用函数后，上下文活动对象会被立即释放，避免占用系统资源，但是，当函数内的局部变量，参数，内层函数被外界引用时，则这个上下文活动对象会继续存在，直到所有外部引用全部被注销。</p>
<p>但是，函数作用域是封闭的，外界无法访问，那么如何外界才能访问到函数内的私有成员呢？</p>
<p>根据作用域链，内层函数可以访问外层函数的私有成员。如果内层函数引用了外层函数的私有成员，同时内层函数又被传送给外部变量，那么闭包就形成了，这个函数就是一个闭包体，当它被调用时后，这个函数的上下文活动对象就暂时不被注销，其上下文环境会一直存在，通过内层函数，可以不断读，写外层函数的私有成员。</p>
<h4 id="2，闭包结构"><a href="#2，闭包结构" class="headerlink" title="2，闭包结构"></a>2，闭包结构</h4><p>典型的闭包体就是一个嵌套结构的函数。内层函数引用外层函数的私有成员，同时内层函数又被外界引用，当外层函数被调用后，就形成了闭包，这个函数也称为闭包函数。</p>
<p>下面是一个典型的闭包结构。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">outer</span>(<span class="params">x</span>):</span><br><span class="line">	<span class="keyword">def</span> <span class="title function_">inner</span>(<span class="params">y</span>):</span><br><span class="line">		<span class="keyword">return</span> x + y</span><br><span class="line">	<span class="keyword">return</span> inner</span><br><span class="line">f = outer(<span class="number">5</span>)</span><br><span class="line"><span class="built_in">print</span>(f(<span class="number">6</span>))</span><br></pre></td></tr></table></figure>
<p>【示例一】在嵌套结构中的函数中，外层函数使用return语句返回内层函数，在内层函数中包含了对外层函数作用域中变量的引用，一旦形成闭包体，就可以利用返回的内层函数的<em>closure</em>内置属性访问外层函数闭包体。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">outer</span>(<span class="params">x</span>):</span><br><span class="line">	<span class="keyword">def</span> <span class="title function_">inner</span>():</span><br><span class="line">		<span class="built_in">print</span>(x)</span><br><span class="line">	<span class="keyword">return</span> inner</span><br><span class="line">	</span><br><span class="line">func = outer(<span class="number">1</span>)</span><br><span class="line"><span class="built_in">print</span>(func._closure_)</span><br><span class="line">func()</span><br></pre></td></tr></table></figure>
<p>输出为：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(&lt;cell at <span class="number">0x00000145A6777E80</span>: <span class="built_in">int</span> <span class="built_in">object</span> at <span class="number">0x00000145A3BA00F0</span>&gt;,)</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure>
<p>【示例二】使用闭包实现优雅的打包，定义临时寄存器</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">f</span>():</span><br><span class="line">	a = <span class="number">0</span></span><br><span class="line">	<span class="keyword">def</span> <span class="title function_">sub</span>(<span class="params">x</span>):</span><br><span class="line">		<span class="keyword">nonlocal</span> a</span><br><span class="line">		a = a + x</span><br><span class="line">		<span class="keyword">return</span> sub</span><br><span class="line">	<span class="keyword">return</span> a</span><br><span class="line">	</span><br><span class="line">add = f()</span><br><span class="line">add(<span class="number">1</span>)</span><br><span class="line">add(<span class="number">12</span>)</span><br><span class="line">add(<span class="number">23</span>)</span><br><span class="line"><span class="built_in">sum</span> = add(<span class="number">34</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">sum</span>)</span><br></pre></td></tr></table></figure>
<p>在上面的示例中，通过外层函数设计一个闭包体，定义一个持久的寄存器。当调用外层函数生成上下文对象之后，就可以利用返回的内层函数不断地向闭包体内的局部变量a递加值，该值会一直存在。</p>
<h3 id="2，函数装饰器"><a href="#2，函数装饰器" class="headerlink" title="2，函数装饰器"></a>2，函数装饰器</h3><p>装饰器是Py的一个重要特性，本质上他就是一个以函数作为参数，并放回一个函数的函数。装饰器可以作为一个函数在不需要修改代码的前提情况下增加其他功能，常用于有切面请求的场景，通常是，插入日志，增加计时逻辑，性能测试，事务处理，缓存，权限校验等场景。有了装饰器，开发人员就可以抽离出大量与函数功能无关的雷同的代码并不断重用。</p>
<p>装饰器的语法以”@”开头，接着是装饰器函数的名称和可选的参数，然后是被装饰的函数，具体语法：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@decorator(<span class="params">dec_opt_args</span>):</span></span><br><span class="line">	<span class="keyword">def</span> <span class="title function_">func_decotator</span>(<span class="params">dec_opt_args</span>):</span><br><span class="line">		<span class="keyword">pass</span></span><br></pre></td></tr></table></figure>
<p>其中decorator表示装饰器，dec_opt_args表示装饰器可选的参数类型，func_decorator表示装饰器函数名称，func_decorator_args表示装饰的函数的参数。</p>
<p>结合实例介绍装饰器的用法：</p>
<p>【示例一】：定义一个简单的函数</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">foo</span>():</span><br><span class="line">	<span class="built_in">print</span>(<span class="string">&#x27;I am foo&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p>为增加函数的新功能：记录函数的执行日志</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">foo</span>():</span><br><span class="line">	<span class="built_in">print</span>(<span class="string">&#x27;I am foo&#x27;</span>)</span><br><span class="line">	<span class="built_in">print</span>(<span class="string">&#x27;foo is running&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p>为了减少重复代码，可以定义一个函数：专门处理日志，处理完日志后再执行业务代码。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">logging</span>(<span class="params">func</span>):</span><br><span class="line">	<span class="built_in">print</span>(<span class="string">&#x27;%s is running&#x27;</span> % func.__name__)</span><br><span class="line">	func()</span><br><span class="line">	</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">foo</span>():</span><br><span class="line">	<span class="built_in">print</span>(<span class="string">&#x27;I am foo&#x27;</span>)</span><br><span class="line">	</span><br><span class="line">logging(foo)</span><br></pre></td></tr></table></figure>
<p>P使用’@’作为装饰器的语法操作符，方便应用装饰函数。针对示例一，下面使用”@”语法应用一下装饰器函数。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">logging</span>(<span class="params">func</span>):</span><br><span class="line">	<span class="keyword">def</span> <span class="title function_">sub</span>():</span><br><span class="line">		<span class="built_in">print</span>(<span class="string">&quot;%s is running&quot;</span> % func.__name__)</span><br><span class="line">		func()</span><br><span class="line">	<span class="keyword">return</span> sub</span><br><span class="line"><span class="meta">@logging</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">foo</span>():</span><br><span class="line">	<span class="built_in">print</span>(<span class="string">&#x27;I am foo&#x27;</span>)</span><br><span class="line">	</span><br><span class="line">foo()</span><br></pre></td></tr></table></figure>
<p>装饰器相当于执行了装饰器logging函数后，又返回被装饰函数foo，因此foo()被调用时相当于执行了两个函数，等价于logging(foo())</p>
<h3 id="3，案例，为装饰器设置参数"><a href="#3，案例，为装饰器设置参数" class="headerlink" title="3，案例，为装饰器设置参数"></a>3，案例，为装饰器设置参数</h3><h4 id="1，对带参数的函数进行装饰"><a href="#1，对带参数的函数进行装饰" class="headerlink" title="1，对带参数的函数进行装饰"></a>1，对带参数的函数进行装饰</h4><p>【示例一】：设计业务函数需要传入的两个参数并计算值，因此需要对装饰器函数内部的嵌套函数进行改动。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">logging</span>(<span class="params">func</span>):</span><br><span class="line">	<span class="keyword">def</span> <span class="title function_">sub</span>(<span class="params">a,b</span>):</span><br><span class="line">		<span class="built_in">print</span>(<span class="string">&quot;% is running&quot;</span> % func.__name__)</span><br><span class="line">		<span class="keyword">return</span> func(a,b)</span><br><span class="line">	<span class="keyword">return</span> sub</span><br><span class="line"><span class="meta">@logging</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">foo</span>(<span class="params">a,b</span>):</span><br><span class="line">	<span class="keyword">return</span> a + b</span><br><span class="line">	</span><br><span class="line"><span class="built_in">sum</span> = foo(<span class="number">2</span>,<span class="number">5</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">sum</span>)</span><br><span class="line"></span><br><span class="line">运行结果：</span><br><span class="line">foo <span class="keyword">is</span> running</span><br><span class="line"><span class="number">7</span></span><br></pre></td></tr></table></figure>
<h4 id="2，解决函数参数数量不确定的问题"><a href="#2，解决函数参数数量不确定的问题" class="headerlink" title="2，解决函数参数数量不确定的问题"></a>2，解决函数参数数量不确定的问题</h4><p>【示例二】示例一展示了参数个数固定的应用场景，不过可以使用Python的可变参数<em>args和*</em>kwargs来解决参数数量不确定的问题。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">logging</span>(<span class="params">func</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">sub</span>(<span class="params">*args,**kwargs</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;%s is running&quot;</span> % func.__name__)</span><br><span class="line">        <span class="keyword">return</span> func(*args,**kwargs)</span><br><span class="line">    <span class="keyword">return</span> sub</span><br><span class="line"></span><br><span class="line"><span class="meta">@logging</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">bar</span>(<span class="params">a,b</span>):</span><br><span class="line">    <span class="built_in">print</span>(a+b)</span><br><span class="line"></span><br><span class="line"><span class="meta">@logging</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">foo</span>(<span class="params">a,b,c</span>):</span><br><span class="line">    <span class="built_in">print</span>(a+b+c)</span><br><span class="line"></span><br><span class="line">bar(<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line">foo(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)</span><br></pre></td></tr></table></figure>
<p>运行结果：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">bar <span class="keyword">is</span> running</span><br><span class="line"><span class="number">1</span> <span class="number">2</span></span><br></pre></td></tr></table></figure>
<h4 id="3，装饰器带参数"><a href="#3，装饰器带参数" class="headerlink" title="3，装饰器带参数"></a>3，装饰器带参数</h4><p>【示例三】在某些情况下，装饰器可能也需要参数，这时就需要使用高价函数来进行设计。针对实例2，为logging装饰器再嵌套一层函数，然后在外层函数中定义一个标志参数lock，默认参数值为True，表示打开日志打印功能：如果为False，则关闭日志功能。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">logging</span>(<span class="params">lock = <span class="literal">True</span></span>):</span><br><span class="line">	<span class="keyword">def</span> <span class="title function_">_logging</span>(<span class="params">func</span>):</span><br><span class="line">		<span class="keyword">def</span> <span class="title function_">sub</span>(<span class="params">*args,**kwargs</span>):</span><br><span class="line">			<span class="keyword">if</span> lock:</span><br><span class="line">				<span class="built_in">print</span>(<span class="string">&quot;%s is running&quot;</span> % func.__name__)</span><br><span class="line">			<span class="keyword">return</span> func(*args,**kwargs)</span><br><span class="line">		<span class="keyword">return</span> sub</span><br><span class="line">	<span class="keyword">return</span> _logging</span><br><span class="line">	</span><br><span class="line"><span class="meta">@logging</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">bar</span>(<span class="params">a,b</span>):</span><br><span class="line">	<span class="built_in">print</span>(a+b)</span><br><span class="line">	</span><br><span class="line"><span class="meta">@logging(<span class="params"><span class="literal">False</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">foo</span>(<span class="params">a,b,c</span>):</span><br><span class="line">	<span class="built_in">print</span>(a+b+c)</span><br><span class="line">	</span><br><span class="line">bar(<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line">foo(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)</span><br></pre></td></tr></table></figure>
<p>运行结果：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">bar <span class="keyword">is</span> running</span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">6</span></span><br></pre></td></tr></table></figure>
<h4 id="4，案例：解决装饰器的副作用"><a href="#4，案例：解决装饰器的副作用" class="headerlink" title="4，案例：解决装饰器的副作用"></a>4，案例：解决装饰器的副作用</h4><p>使用装饰器可以简化代码的编写，但是它也有一个缺点：被装饰的原函数的原信息被覆盖了，如函数的<strong>doc</strong>(文档字符串)、<strong>name</strong>(函数名称)、<strong>code</strong>.co.varnames(参数列表)等。</p>
<p>例如针对上一节示例3，输入如下代码。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(bar.__name__)</span><br></pre></td></tr></table></figure>
<p>将打印sub()，而不是bar，这种情况在使用反射函数时间就会带来问题，不过使用functools.wraps()函数可以解决这个问题。</p>
<p>【示例】导入functools模块，然后使用functools.wrap()函数恢复参数函数的元信息，这样当调用装饰器后，被装饰的函数的元信息重新被恢复为原来的状态。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> functools</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">logging</span>(<span class="params">lock=<span class="literal">True</span></span>):</span><br><span class="line">	<span class="keyword">def</span> <span class="title function_">_logging</span>(<span class="params">func</span>):</span><br><span class="line"><span class="meta">		@functools.wraps(<span class="params">func</span>)</span></span><br><span class="line">		<span class="keyword">def</span> <span class="title function_">sub</span>(<span class="params">*args,**kwargs</span>):</span><br><span class="line">			<span class="keyword">if</span> lock:</span><br><span class="line">				<span class="built_in">print</span>(<span class="string">&quot;%s is running&quot;</span> % func.__name__)</span><br><span class="line">			<span class="keyword">return</span> func(*args,**kwargs)</span><br><span class="line">		<span class="keyword">return</span> sub</span><br><span class="line">	<span class="keyword">return</span> _logging</span><br><span class="line">    </span><br><span class="line"><span class="meta">@logging()</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">bar</span>(<span class="params">a,b</span>):</span><br><span class="line">	<span class="built_in">print</span>(a+b)</span><br><span class="line">    </span><br><span class="line"><span class="meta">@logging(<span class="params"><span class="literal">False</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">foo</span>(<span class="params">a,b,c</span>):</span><br><span class="line">	<span class="built_in">print</span>(a+b+c)</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"><span class="built_in">print</span>(bar.__name__)	</span><br></pre></td></tr></table></figure>
<h4 id="5，案例：设计函数调用日志装饰器"><a href="#5，案例：设计函数调用日志装饰器" class="headerlink" title="5，案例：设计函数调用日志装饰器"></a>5，案例：设计函数调用日志装饰器</h4><p>​    下面的案例将完善装饰器的功能，使其能够适应带参数和不带参数等不同的应用需求。在装饰函数时，可以按默认设置把日志信息写入当前目录下的out.log文件中，也可以指定一个文件，日志信息主要包含函数调用的时间</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> wraps		<span class="comment">#调用functools模块中的wrap函数</span></span><br><span class="line"><span class="keyword">import</span> time						<span class="comment">#导入time模块</span></span><br><span class="line"><span class="keyword">from</span> os <span class="keyword">import</span> path				<span class="comment">#导入os模块中的path子模块</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">logging</span>(<span class="params">arg=<span class="string">&#x27;out.log&#x27;</span></span>):		<span class="comment">#日志处理函数</span></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">callable</span>(arg):			<span class="comment">#判断参数是否为函数，不带参数的装饰器将调用这个分支</span></span><br><span class="line"><span class="meta">        @wraps(<span class="params">arg</span>)				</span><span class="comment">#恢复参数函数的元信息</span></span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">sub</span>(<span class="params">*args,**kwargs</span>):<span class="comment">#嵌套函数</span></span><br><span class="line">            log_string = arg.__name__ + <span class="string">&quot; was called &quot;</span> + \</span><br><span class="line">				time.strftime(<span class="string">&quot;%Y-%m-%d %H:%M:%S&quot;</span>,time.localtime())		<span class="comment">#设计日志信息字符串</span></span><br><span class="line">            <span class="built_in">print</span>(log_string)	<span class="comment">#打印信息</span></span><br><span class="line">            logfile = <span class="string">&#x27;out.log&#x27;</span>	<span class="comment">#指定存储的文件</span></span><br><span class="line">            <span class="keyword">with</span> <span class="built_in">open</span>(logfile,<span class="string">&#x27;a&#x27;</span>) <span class="keyword">as</span> opened_file:	<span class="comment"># 打开logfile,并写入内容</span></span><br><span class="line">                opened_file.write(log_string + <span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line">            <span class="keyword">return</span> arg(*args,**kwargs)	<span class="comment">#调用参数函数</span></span><br><span class="line">        <span class="keyword">return</span> sub				<span class="comment">#返回嵌套函数</span></span><br><span class="line">    <span class="keyword">else</span>:						<span class="comment">#带参数的装饰器调用这个分支</span></span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">_logging</span>(<span class="params">func</span>):		<span class="comment">#2层嵌套函数</span></span><br><span class="line"><span class="meta">            @wraps(<span class="params">func</span>)		</span><span class="comment">#恢复参数函数的元信息</span></span><br><span class="line">            <span class="keyword">def</span> <span class="title function_">sub</span>(<span class="params">*args,**kwargs</span>):	<span class="comment">#三层嵌套函数</span></span><br><span class="line">                <span class="keyword">if</span> <span class="built_in">isinstance</span>(arg,<span class="built_in">str</span>):	<span class="comment">#如果指定文件路径</span></span><br><span class="line">                    <span class="keyword">if</span> path.splitext(arg)[<span class="number">1</span>] == <span class="string">&quot;.log&quot;</span>: <span class="comment">#筛选log文件</span></span><br><span class="line">                        logfile = arg	<span class="comment">#自定义文件名</span></span><br><span class="line">                    <span class="keyword">else</span>:</span><br><span class="line">                        logfile = <span class="string">&#x27;out.log&#x27;</span>	<span class="comment">#默认文件名</span></span><br><span class="line">                    log_string = func.__name__ + <span class="string">&quot; was called &quot;</span> + \</span><br><span class="line">						time.strftime(<span class="string">&quot;%Y-%m-%d %H:%M:%S&quot;</span>,time.localtime())		<span class="comment">#设计日志信息字符串</span></span><br><span class="line">                    <span class="built_in">print</span>(log_string)	<span class="comment">#打印信息</span></span><br><span class="line">                    <span class="keyword">with</span> <span class="built_in">open</span>(logfile,<span class="string">&#x27;a&#x27;</span>) <span class="keyword">as</span> opened_file:	<span class="comment">#打开logfile,并写入内容</span></span><br><span class="line">                        opened_file.write(log_string + <span class="string">&#x27;\n&#x27;</span>)	<span class="comment">#将日志打到指定的logfile</span></span><br><span class="line">                <span class="keyword">return</span> func(*args, **kwargs)	<span class="comment">#调用参数函数</span></span><br><span class="line">            <span class="keyword">return</span> sub							<span class="comment">#返回3层嵌套函数</span></span><br><span class="line">        <span class="keyword">return</span> _logging							<span class="comment">#返回2层嵌套函数</span></span><br><span class="line">    </span><br><span class="line"><span class="meta">@logging										</span><span class="comment">#应用装饰函数，将默认文件记录日志信息</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">bar</span>(<span class="params">a,b</span>):									<span class="comment">#业务参数</span></span><br><span class="line">    <span class="built_in">print</span>(a+b)</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line"><span class="meta">@logging(<span class="params"><span class="string">&quot;foo.log&quot;</span></span>)								</span><span class="comment">#应用装饰函数，指定日志文件</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">foo</span>(<span class="params">a,b,c</span>):									<span class="comment">#业务函数</span></span><br><span class="line">    <span class="built_in">print</span>(a+b+c)</span><br><span class="line">    </span><br><span class="line">bar(<span class="number">2</span>,<span class="number">3</span>)</span><br><span class="line">foo(<span class="number">2</span>,<span class="number">3</span>,<span class="number">3</span>)</span><br></pre></td></tr></table></figure>
<p>运行结果：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">bar was called <span class="number">2023</span>-<span class="number">10</span>-<span class="number">27</span> <span class="number">13</span>:06:08</span><br><span class="line"><span class="number">5</span></span><br><span class="line">foo was called <span class="number">2023</span>-<span class="number">10</span>-<span class="number">27</span> <span class="number">13</span>:06:08</span><br><span class="line"><span class="number">8</span></span><br></pre></td></tr></table></figure>
<h4 id="6，案例：使用lambda表达式定义闭包"><a href="#6，案例：使用lambda表达式定义闭包" class="headerlink" title="6，案例：使用lambda表达式定义闭包"></a>6，案例：使用lambda表达式定义闭包</h4><p>使用lambda表达式定义的匿名函数与def函数一样，也拥有独立的作用域。当在嵌套结构中的闭包体中使用lambda表达式替代def函数，有时会使代码更加简洁、易读。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.不使用lambda表达式</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">demo</span>(<span class="params">n</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">fun</span>(<span class="params">s</span>):</span><br><span class="line">        <span class="keyword">return</span> s ** n</span><br><span class="line">    <span class="keyword">return</span> fun</span><br><span class="line"></span><br><span class="line">a1 = demo(<span class="number">2</span>)</span><br><span class="line">a = a1(<span class="number">8</span>)</span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"><span class="comment"># 2.使用lambda表达式</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">demo</span>(<span class="params">n</span>):</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">lambda</span> s : s ** n</span><br><span class="line">a = demo(<span class="number">2</span>)</span><br><span class="line"><span class="built_in">print</span>(a(<span class="number">8</span>))</span><br><span class="line"><span class="comment"># 3.完全使用lambda表达式定义闭包结构</span></span><br><span class="line">demo = <span class="keyword">lambda</span> n : <span class="keyword">lambda</span> s : s ** n</span><br><span class="line">a = demo(<span class="number">2</span>)</span><br><span class="line"><span class="built_in">print</span>(a(<span class="number">8</span>))</span><br></pre></td></tr></table></figure>
<p>运行结果：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">64</span></span><br><span class="line"><span class="number">64</span></span><br><span class="line"><span class="number">64</span></span><br></pre></td></tr></table></figure>
<h4 id="7，案例：解决闭包的副作用"><a href="#7，案例：解决闭包的副作用" class="headerlink" title="7，案例：解决闭包的副作用"></a>7，案例：解决闭包的副作用</h4><p>闭包的优点：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#实现在外部访问函数内的变量。函数是独立的作用域，它可以访问外部变量，但外部无法访问内部变量。</span><br><span class="line">#避免变量污染。使用global、nonlocal关键字，可以开放函数内部变量，但是容易造成内部变量被外部污染。</span><br><span class="line">#使函数变量常驻内存，为可持续保存数据提供便利</span><br></pre></td></tr></table></figure>
<p>闭包的缺点：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#常驻内存会增大内存负担。无节制的滥用闭包，容易造成内存泄露。</span><br><span class="line">	解决方法：如果没有必要，就不要使用闭包，特别是在循环体内无限生成闭包；在退出函数之前，将不用的局部变量全部删除。</span><br><span class="line">#破坏函数作用域。闭包函数能够改变外层函数内变量的值。所以，如果把外层函数当作对象使用，把闭包函数当作公用方法，把内部变量当作私有属性，就一定要小心。</span><br><span class="line">	解决方法:不要随便改变外层函数内变量的值。</span><br><span class="line">#闭包函数所引用的外层函数的变量是延迟绑定的，只有当内层函数被调用时，才会搜索、绑定变量的值，这会带来不确定性。</span><br><span class="line">	解决方法：生成闭包函数的时候就立即绑定变量。</span><br></pre></td></tr></table></figure>
<p>下面结合示例介绍如何解决闭包的第3个缺点。</p>
<p>【示例一】下面示例分别使用lambda表达式和嵌套结构 的函数定义闭包，返回两个闭包函数，在闭包函数内引用了外层函数的变量i，计算参数的i次方。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#使用lambda表达式</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">demo</span>():</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,<span class="number">3</span>):</span><br><span class="line">        <span class="keyword">yield</span> <span class="keyword">lambda</span> x : x ** i</span><br><span class="line">demo1,demo2 = demo()</span><br><span class="line"><span class="built_in">print</span>(demo1(<span class="number">2</span>),demo2(<span class="number">3</span>))</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 使用嵌套结构函数</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">demo</span>():</span><br><span class="line">    result = <span class="built_in">list</span>()</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,<span class="number">3</span>):</span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">func</span>(<span class="params">x</span>):</span><br><span class="line">            <span class="keyword">return</span> x ** i</span><br><span class="line">        result.append(func)</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line">demo1,demo2 = demo()</span><br><span class="line"><span class="built_in">print</span>(demo1(<span class="number">2</span>),demo2(<span class="number">3</span>))</span><br></pre></td></tr></table></figure>
<p>由于延迟绑定的缘故，当调用闭包函数时，两个函数所搜索的外层变量i的值此时都为2，打印结果如下</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">4 9</span><br></pre></td></tr></table></figure>
<p>【示例二】针对示例1存在的问题，可以使用形参的默认值立即绑定变量</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#使用lambda变量</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">demo</span>():</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,<span class="number">3</span>):</span><br><span class="line">        <span class="keyword">yield</span> <span class="keyword">lambda</span> x, i = i : x ** i</span><br><span class="line">demo1, demo2 = demo()			</span><br><span class="line"><span class="built_in">print</span>(demo1(<span class="number">2</span>),demo2(<span class="number">3</span>))</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#使用嵌套结构函数</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">demo</span>():</span><br><span class="line">    result = <span class="built_in">list</span>()</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,<span class="number">3</span>):</span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">func</span>(<span class="params">x,i=i</span>):</span><br><span class="line">            <span class="keyword">return</span> x ** i</span><br><span class="line">        result.append(func)</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line">demo1,demo2 = demo()</span><br><span class="line"><span class="built_in">print</span>(demo1(<span class="number">2</span>),demo2(<span class="number">3</span>))</span><br></pre></td></tr></table></figure>
<p>运行结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2 9</span><br></pre></td></tr></table></figure>
<p>在生成内层函数时，把外层变量i的值赋值给内层函数的形参i，立即绑定变量，这样在内层函数中</p>
<p>访问时，就是形参变量i，而不是外层函数的变量i。此时两个闭包函数引用i的值就与循环过程中i的值保持一致，分别为1和2，打印结果如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">2 9</span><br><span class="line">2 9</span><br></pre></td></tr></table></figure>
<h2 id="6，递归函数"><a href="#6，递归函数" class="headerlink" title="6，递归函数"></a>6，递归函数</h2><p>递归就是调用自身的一种方法，是循环计算的一种算法模式，在程序中广泛应用。</p>
<h3 id="1，定义递归函数"><a href="#1，定义递归函数" class="headerlink" title="1，定义递归函数"></a>1，定义递归函数</h3><p>​    递归函数就是一个函数直接或间接地调用自身。一般来说，递归需要有边界条件、递归前进段和递归返回段、当边界条件不满足时，递归前进；当边界条件满足时，递归就返回。在递归调用的过程中，系统会每一层的调用进行缓存，因此递归运算会占用大量的系统资源，过多的递归次数容易导致内存溢出。</p>
<p>​    递归必须由以下两部分组成。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#递归调用的过程</span><br><span class="line">#递归调用的条件</span><br></pre></td></tr></table></figure>
<p>在没有限制的情况下，递归运算会无终止地调用自身。因此，在递归运算中要结合if语句进行控制，只有在某个条件成立时才允许执行递归，否则不允许调用自身。</p>
<p>递归运算的应用场景如下：</p>
<h4 id="1，求解递归问题"><a href="#1，求解递归问题" class="headerlink" title="1，求解递归问题"></a>1，求解递归问题</h4><p>主要解决一些数学运算，如阶乘函数，幂函数和斐波那契数列。</p>
<p>【示例1】使用递归运算来设计阶乘函数</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">f</span>(<span class="params">x</span>):</span><br><span class="line">	<span class="keyword">if</span> (x &lt; <span class="number">2</span>): </span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">	<span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> x * f(x - <span class="number">1</span>)</span><br><span class="line"><span class="built_in">print</span>(f(<span class="number">5</span>))</span><br><span class="line">    </span><br></pre></td></tr></table></figure>
<p>在这个过程中，利用if语句把递归结束的条件和递归运算分开。</p>
<h4 id="2，解析递归型数据结构"><a href="#2，解析递归型数据结构" class="headerlink" title="2，解析递归型数据结构"></a>2，解析递归型数据结构</h4><p>​    很多数据结构都具有递归性，如DOM文档树、多级目录结构、多级导航菜单、家族谱系结构等。</p>
<p>对于这类数据结构，使用递归算法进行遍历比较合适</p>
<p>【示例2】Python递归遍历目录下所有文件。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#遍历filepath下所有文件，包括子目录</span></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">gci</span>(<span class="params">filepath</span>):</span><br><span class="line">    files = os.listdir(filepath)</span><br><span class="line">    <span class="keyword">for</span> fi <span class="keyword">in</span> files:</span><br><span class="line">        fi_d = os.path.join(filepath,fi)</span><br><span class="line">        <span class="keyword">if</span> os.path.isdir(fi_d):</span><br><span class="line">            gci(fi_d)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="built_in">print</span>(fi_d)</span><br><span class="line">           </span><br><span class="line"><span class="comment">#递归遍历test目录下所有文件</span></span><br><span class="line">gci(<span class="string">&#x27;test&#x27;</span>)</span><br></pre></td></tr></table></figure>
<h4 id="3，适合使用递归法解决问题"><a href="#3，适合使用递归法解决问题" class="headerlink" title="3，适合使用递归法解决问题"></a>3，适合使用递归法解决问题</h4><p>有些问题最适合采用递归的方法求解，如汉诺塔问题。</p>
<p>【示例3】使用递归运算设计汉诺塔演示函数。参数说明：n表示金片数；a,b,c表示柱子，注意排序顺序。返回说明：当指定金片数和柱子名称时，将输出整个移动的过程。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">f</span>(<span class="params">n,a,b,c</span>):</span><br><span class="line">	<span class="keyword">if</span>(n == <span class="number">1</span>):</span><br><span class="line">		<span class="built_in">print</span>(<span class="string">&quot;移动【盘子%s】 从 【%s柱】 到 【%s柱】&quot;</span> % (n,a,c))</span><br><span class="line">	<span class="keyword">else</span>:</span><br><span class="line">		f(n - <span class="number">1</span>,a,c,b)</span><br><span class="line">		<span class="built_in">print</span>(<span class="string">&quot;移动【盘子%s】 从 【%s柱】 到 【%s柱】&quot;</span> % (n,a,c))</span><br><span class="line">		f(n - <span class="number">1</span>,b,a,c)</span><br><span class="line"></span><br><span class="line">f(<span class="number">3</span>,<span class="string">&quot;A&quot;</span>,<span class="string">&quot;B&quot;</span>,<span class="string">&quot;C&quot;</span>)</span><br><span class="line">		</span><br></pre></td></tr></table></figure>
<p>运行结果：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">移动【盘子<span class="number">1</span>】 从 【A柱】 到 【C柱】</span><br><span class="line">移动【盘子<span class="number">2</span>】 从 【A柱】 到 【B柱】</span><br><span class="line">移动【盘子<span class="number">1</span>】 从 【C柱】 到 【B柱】</span><br><span class="line">移动【盘子<span class="number">3</span>】 从 【A柱】 到 【C柱】</span><br><span class="line">移动【盘子<span class="number">1</span>】 从 【B柱】 到 【A柱】</span><br><span class="line">移动【盘子<span class="number">2</span>】 从 【B柱】 到 【C柱】</span><br><span class="line">移动【盘子<span class="number">1</span>】 从 【A柱】 到 【C柱】</span><br></pre></td></tr></table></figure>
<h3 id="2，尾递归"><a href="#2，尾递归" class="headerlink" title="2，尾递归"></a>2，尾递归</h3><p>尾递归是递归的一种优化算法，他从最后开始计算，每递归一次就算出相应的结果，并把当前的运算结果（或路径）放在参数里传给下一层函数。在递归的尾部，立即返回最后的结果，不需要递归返回，因此不用缓存中间调用对象。</p>
<p>【示例】下面是阶乘的一种普通线性递归运算</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">f</span>(<span class="params">n</span>):</span><br><span class="line">	<span class="keyword">return</span> <span class="number">1</span> <span class="keyword">if</span> (n==<span class="number">1</span>) <span class="keyword">else</span> n * f(n-<span class="number">1</span>)</span><br><span class="line"><span class="built_in">print</span>(f(<span class="number">5</span>))</span><br></pre></td></tr></table></figure>
<p>使用尾递归算法后，则可以使用如下的方法。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">f</span>(<span class="params">n,a</span>):</span><br><span class="line">	<span class="keyword">return</span> a <span class="keyword">if</span> (n==<span class="number">1</span>) <span class="keyword">else</span> f(n-<span class="number">1</span>,a*n)</span><br><span class="line"><span class="built_in">print</span>(f(<span class="number">5</span>,<span class="number">1</span>))</span><br></pre></td></tr></table></figure>
<p>当n=5时，线性递归的递归过程如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">f(<span class="number">5</span>) = &#123;<span class="number">5</span> * f(<span class="number">4</span>)&#125;</span><br><span class="line">	= &#123;<span class="number">5</span> * &#123;<span class="number">4</span> * f&#123;<span class="number">3</span>&#125;&#125;&#125;</span><br><span class="line">	= &#123;<span class="number">5</span> * &#123;<span class="number">4</span> * &#123;<span class="number">3</span> * f&#123;<span class="number">2</span>&#125;&#125;&#125;&#125;</span><br><span class="line">	= &#123;<span class="number">5</span> * &#123;<span class="number">4</span> * &#123;<span class="number">3</span> * &#123;<span class="number">2</span> * f&#123;<span class="number">1</span>&#125;&#125;&#125;&#125;&#125;</span><br><span class="line">	= &#123;<span class="number">5</span> * &#123;<span class="number">4</span> * &#123;<span class="number">3</span> * &#123;<span class="number">2</span> * <span class="number">1</span>&#125;&#125;&#125;&#125;</span><br><span class="line">	= &#123;<span class="number">5</span> * &#123;<span class="number">4</span> * &#123;<span class="number">3</span> * &#123;<span class="number">2</span>&#125;&#125;&#125;&#125;</span><br><span class="line">	= &#123;<span class="number">5</span> * &#123;<span class="number">4</span> * <span class="number">6</span>&#125;&#125;</span><br><span class="line">	= &#123;<span class="number">5</span> * <span class="number">24</span>&#125;</span><br><span class="line">	= <span class="number">120</span></span><br></pre></td></tr></table></figure>
<p>而尾递归的递归过程如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">f(<span class="number">5</span>) = f(<span class="number">5</span>,<span class="number">1</span>)</span><br><span class="line">	= f(<span class="number">4</span>,<span class="number">5</span>)</span><br><span class="line">	= f(<span class="number">3</span>,<span class="number">20</span>)</span><br><span class="line">	= f(<span class="number">2</span>,<span class="number">60</span>)</span><br><span class="line">	= f(<span class="number">1</span>,<span class="number">120</span>)</span><br><span class="line">	= <span class="number">120</span></span><br></pre></td></tr></table></figure>
<p>很容易看出，普通递归比尾递归更加消耗资源，每次重复的过程调用都使得调用链条不断加长，使系统不得不使用栈进行数据保存与恢复，而尾递归就不存在这样的问题，因为他的状态完全由变量n和a保存。</p>
<p>【提示】</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">从理论上分析，尾递归也是递归的一种类型，不过他的算法具有迭代算法的特征。上面的阶乘尾递归可以改写为下面的迭代循环。</span><br><span class="line"> n = 5</span><br><span class="line"> w = 1</span><br><span class="line"> for i in range(1,n+1):</span><br><span class="line"> 	w = w * 1</span><br><span class="line"> print(w)</span><br></pre></td></tr></table></figure>
<h3 id="3，递归与迭代"><a href="#3，递归与迭代" class="headerlink" title="3，递归与迭代"></a>3，递归与迭代</h3><p>​    递归和迭代都是循环运算的一种方法。简单比较如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">在程序结构上，递归是重复调用函数自身实现循环，迭代是通过循环语句实现循环。</span><br><span class="line">在结束方式上，递归遇到终止条件时会递归返回后结束，迭代则直接结束循环。</span><br><span class="line">在执行效率上，迭代的效率明显高于递归，因为递归需要占用大量系统资源，如果递归次数很大，系统资源可能会不够用。</span><br><span class="line">编程实现：递归可以很方便地把数学公式转换为程序，易理解、易编程。迭代虽然效率高，不需要系统开销，但不容易理解，编写复杂问题时比较麻烦。</span><br></pre></td></tr></table></figure>
<p>【注意】</p>
<p>在实际应用中，能不用递归就不用递归，递归都可以用迭代来代替</p>
<p>【示例】下面拿斐波那契数列为例进行说明。</p>
<p>斐波那契数列就是一组数字，从第3项开始，每一项都等于前两项之和。例如：</p>
<p>1，1，2，3，5，8，13，21，34，55，89，144，233，377，610，987，1597，2584，4181</p>
<p>使用递归函数计算斐波那契数列，其中最前面的两个数字是0和1。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">fibonacii</span> (n):</span><br><span class="line">	<span class="keyword">return</span> n <span class="keyword">if</span> (n &lt; <span class="number">2</span>) <span class="keyword">else</span> fibonacii(n - <span class="number">1</span>) + fibonacii(n - <span class="number">2</span>)</span><br><span class="line"><span class="built_in">print</span>(fibonacii(<span class="number">19</span>))</span><br></pre></td></tr></table></figure>
<p>尝试传入更大的数字，会发现递归运算的次数加倍递增，速度加倍递减，返回值加倍放大。如果尝试计算100的斐波那契数列，则需要等待很长的时间。</p>
<p>下面使用迭代算法来设计斐波那契数列，代码如下，基本没有任何延迟。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">fibonacii</span>(<span class="params">n</span>):</span><br><span class="line">	a = [<span class="number">0</span>,<span class="number">1</span>]</span><br><span class="line">	<span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>,n+<span class="number">1</span>):</span><br><span class="line">		append(a[i-<span class="number">2</span>] + a[i-<span class="number">1</span>])</span><br><span class="line">	<span class="keyword">return</span> a[n]</span><br><span class="line"><span class="built_in">print</span>(fibonacii(<span class="number">19</span>))	</span><br></pre></td></tr></table></figure>
<p>下面使用高阶函数来进行设计，把斐波那契数列函数封装在一个闭包体内，然后返回斐波那契数列函数，在闭包内使用memo字典持久记录每级斐波那契数列函数的求值结果，在下一次求值之前，先在字典中检索是否存在同级（数列的个数，字典的键）计算结果，如果存在，则直接返回，避免重复行计算；如果没有找到结果，则调用斐波那契数列函数进行求和。实现代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">fibonacii</span>():</span><br><span class="line">    memo = &#123;<span class="number">0</span>:<span class="number">0</span>,<span class="number">1</span>:<span class="number">1</span>&#125;</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">fib</span>(<span class="params">n</span>):</span><br><span class="line">        result = memo.get(n,<span class="literal">None</span>)</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> <span class="built_in">isinstance</span>(result,(<span class="built_in">int</span>,<span class="built_in">float</span>)):</span><br><span class="line">            result = fib(n-<span class="number">1</span>) + fib(n-<span class="number">2</span>)</span><br><span class="line">            memo[n] = result</span><br><span class="line">        <span class="keyword">return</span> result</span><br><span class="line">    <span class="keyword">return</span> fib</span><br><span class="line"></span><br><span class="line">fibonacii = fibonacii()</span><br><span class="line"><span class="built_in">print</span>(fibonacii(<span class="number">100</span>))</span><br></pre></td></tr></table></figure>
<p>运行结果：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">354224848179261915075</span></span><br></pre></td></tr></table></figure>
<h3 id="4，案例：猴子吃桃"><a href="#4，案例：猴子吃桃" class="headerlink" title="4，案例：猴子吃桃"></a>4，案例：猴子吃桃</h3><p>有一只猴子，第1天摘下若干个桃子，当即吃了一半，不接馋，又多吃了一个。第2天早上又将剩下的桃子吃掉了一半，又多吃了一个。以后每天早上都吃了前一天剩下的一半零一个。到第10天早上想再吃时，见只剩下一个桃子了。求第一天共摘了多少个桃子。</p>
<p>【设计思路】</p>
<p>第10天时，还剩下一个桃子，所以peach(10)=1.</p>
<p>第1-9天时，peach(day - 1) =peach(day)/2-1，由此可见，peach(day) = (peach(day+1)+1)*2，采用递归思路即可求解。</p>
<p>【实现代码】</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">peach</span>(<span class="params">day:<span class="built_in">int</span></span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">	<span class="keyword">if</span> day == <span class="number">10</span>:</span><br><span class="line">		<span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">	<span class="keyword">else</span>:</span><br><span class="line">		<span class="keyword">return</span> (peach(day + <span class="number">1</span>) + <span class="number">1</span>)*<span class="number">2</span></span><br><span class="line"><span class="built_in">print</span>(peach(<span class="number">1</span>))</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>【提示】</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Python从3.5版本开始，引入了类型注解 ，用于类型检查，防止运行时出现参数和返回值类型、变量类型不符合。</span><br><span class="line">注解方法：</span><br><span class="line">变量:类型 = 初始值</span><br><span class="line">def 函数名（参数：类型） -&gt; 返回值类型：</span><br><span class="line">	pass</span><br><span class="line"></span><br><span class="line">注解不会影响程序的运行，不会正式报错误，只有提醒。</span><br></pre></td></tr></table></figure>
<h3 id="5，案例：角谷定理"><a href="#5，案例：角谷定理" class="headerlink" title="5，案例：角谷定理"></a>5，案例：角谷定理</h3><p>角谷定理：任意输入一个大于1的自然数，如果为偶数，则将它除以2；如果为奇数，则将它乘以3加1.经过如此有限次计算后，总可以得到自然数值1，求经过多少此可以得到自然数1.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">num = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&quot;请输入一个整数:&quot;</span>))</span><br><span class="line">times = <span class="number">0</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>(<span class="params">num</span>):</span><br><span class="line">    <span class="keyword">global</span> times</span><br><span class="line">    <span class="keyword">if</span> num == <span class="number">1</span>:</span><br><span class="line">        <span class="keyword">return</span> times</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> num % <span class="number">2</span> == <span class="number">0</span>:</span><br><span class="line">        times += <span class="number">1</span></span><br><span class="line">        num /= <span class="number">2</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;第&#123;&#125;步,得到结果&#123;&#125;&quot;</span>.<span class="built_in">format</span>(times,num))</span><br><span class="line">        func(num)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        times += <span class="number">1</span></span><br><span class="line">        num = num * <span class="number">3</span> + <span class="number">1</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;第&#123;&#125;步,得到结果&#123;&#125;&quot;</span>.<span class="built_in">format</span>(times,num))</span><br><span class="line">        func(num)</span><br><span class="line"></span><br><span class="line">func(num)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;总共经过了%d得到了自然数1&#x27;</span>% times)</span><br></pre></td></tr></table></figure>
<p>运行结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">请输入一个整数:7</span><br><span class="line">第1步,得到结果22</span><br><span class="line">第2步,得到结果11.0</span><br><span class="line">第3步,得到结果34.0</span><br><span class="line">第4步,得到结果17.0</span><br><span class="line">第5步,得到结果52.0</span><br><span class="line">第6步,得到结果26.0</span><br><span class="line">第7步,得到结果13.0</span><br><span class="line">第8步,得到结果40.0</span><br><span class="line">第9步,得到结果20.0</span><br><span class="line">第10步,得到结果10.0</span><br><span class="line">第11步,得到结果5.0</span><br><span class="line">第12步,得到结果16.0</span><br><span class="line">第13步,得到结果8.0</span><br><span class="line">第14步,得到结果4.0</span><br><span class="line">第15步,得到结果2.0</span><br><span class="line">第16步,得到结果1.0</span><br><span class="line">总共经过了16得到了自然数1</span><br></pre></td></tr></table></figure>
<h2 id="7，案例实战"><a href="#7，案例实战" class="headerlink" title="7，案例实战"></a>7，案例实战</h2><h3 id="1，函数合成"><a href="#1，函数合成" class="headerlink" title="1，函数合成"></a>1，函数合成</h3><p>高阶函数是函数式编程最显示的特征，起形式应至少满足下列条件之一。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#函数可以作为参数被传入（即回调函数），如函数合成运算</span><br><span class="line">#可以返回函数作为输出，如函数柯里化运算</span><br></pre></td></tr></table></figure>
<p>compose(函数合成)和(柯里化)是函数式编程两种最基本的运算，他们都利用了函数闭包的特性和思路来进行设计。</p>
<p>【问题提出】</p>
<p>在函数式编程中，经常见到如下表达式运算。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a(b(c(x)));</span><br></pre></td></tr></table></figure>
<p>这是“包菜式”多层函数调用，不是很优雅。为了解决函数多层调用的嵌套问题，需要用到函数合成。合成语法如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">f = compose(a,b,c)</span><br><span class="line">f(x)</span><br></pre></td></tr></table></figure>
<p>例如：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">compose</span>(<span class="params">f,g</span>):</span><br><span class="line">	<span class="keyword">def</span> <span class="title function_">sub</span>(<span class="params">x</span>):</span><br><span class="line">		<span class="keyword">return</span> f(g(x))</span><br><span class="line">	<span class="keyword">return</span> sub</span><br><span class="line">	</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">add</span>(<span class="params">x</span>):<span class="keyword">return</span> x + <span class="number">1</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">mul</span>(<span class="params">x</span>):<span class="keyword">return</span> x * <span class="number">5</span></span><br><span class="line">f = compose(mul,add)</span><br><span class="line"><span class="built_in">print</span>(f(<span class="number">2</span>))</span><br></pre></td></tr></table></figure>
<p>上面的代码中，compose（）函数的作用就是组合函数，将函数串联起来执行。将多个函数组合起来，函数的输出结果是另一个函数的输入参数，一旦第1个函数开始执行，就会像多米诺骨牌一样开始执行了。</p>
<p>【注意】</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">使用compose()函数需要注意以下三点。</span><br><span class="line">#compose()的参数是函数，返回的也是一个函数。</span><br><span class="line">#除了初始函数（最右侧的一个）外，其他函数的接收参数都是上一个函数的返回值，即初始函数的参数可以是多元的，而其他函数的接收值是一元的。</span><br><span class="line">#compose()函数可以接收任意的参数，所有的参数都是函数，且执行方向是自右向左的，初始函数一定放到参数的最右侧。</span><br></pre></td></tr></table></figure>
<p>【实现代码】</p>
<p>下面来完善compose()实现，实现无线函数合成</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#函数合成，从右到左合成函数</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">compose</span>(<span class="params">*argumenta</span>):</span><br><span class="line">	_arguments = arguments    <span class="comment">#缓存外层函数</span></span><br><span class="line">	length = <span class="built_in">len</span>(_length)	  <span class="comment">#缓存长度</span></span><br><span class="line">	index = length			 <span class="comment">#定义游标长度</span></span><br><span class="line">	<span class="comment">#检测参数，如果存在非函数参数，则抛出异常</span></span><br><span class="line">	<span class="keyword">while</span> (index):</span><br><span class="line">		index = index - <span class="number">1</span></span><br><span class="line">		<span class="keyword">if</span> <span class="keyword">not</span> <span class="built_in">callable</span> (_arguments[index]):</span><br><span class="line">		<span class="keyword">raise</span> NameError(<span class="string">&#x27;参数必须为函数！&#x27;</span>)</span><br><span class="line">		</span><br><span class="line">	<span class="comment">#在返回的内存函数中执行运算</span></span><br><span class="line">	<span class="keyword">def</span> <span class="title function_">sub</span>(<span class="params">*args,**kwargs</span>):</span><br><span class="line">		index = length-<span class="number">1</span>	  <span class="comment">#定位到最后一个参数下标</span></span><br><span class="line">		<span class="comment">#调用最后一个参数函数，并传入内层参数</span></span><br><span class="line">		result = _arguments[index](*args,**kwargs)</span><br><span class="line">        <span class="comment">#迭代参数函数</span></span><br><span class="line">        <span class="keyword">while</span> (index):</span><br><span class="line">            index = index-<span class="number">1</span></span><br><span class="line">            <span class="comment">#把右侧函数的执行效果作为参数传给左侧参数函数，并调用</span></span><br><span class="line">            result = _arguments[index](result)</span><br><span class="line">		<span class="keyword">return</span> result 		<span class="comment">#返回最左侧参数函数的执行效果</span></span><br><span class="line">    <span class="keyword">return</span> sub				<span class="comment">#返回内层函数</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#反向函数合成，即从左到右合成函数</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">composeLeft</span>(<span class="params">*arguments</span>):</span><br><span class="line">    <span class="built_in">list</span> = []					<span class="comment">#定义临时列表</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> arguments:			 <span class="comment">#遍历参数列表</span></span><br><span class="line">        <span class="built_in">list</span>.insert(<span class="number">0</span>,i)  		 <span class="comment">#倒序排列，因为元素为函数，无法调用内置函数</span></span><br><span class="line">    <span class="keyword">return</span> compose(*<span class="built_in">list</span>) 	 	 <span class="comment">#调用compose()函数</span></span><br><span class="line">            </span><br><span class="line">		</span><br><span class="line">		</span><br><span class="line">		</span><br></pre></td></tr></table></figure>
<p>在上面的代码中，compose()实现从右到左进行合成，也提供了从左到右的合成，即composeLeft()，同时在compose()内添加了一层函数的校验，允许传递一个或多个参数。</p>
<p>【应用代码】</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">add = <span class="keyword">lambda</span> x : x + <span class="number">5</span> </span><br><span class="line">mul = <span class="keyword">lambda</span> x : x * <span class="number">5</span> </span><br><span class="line">sub = <span class="keyword">lambda</span> x : x - <span class="number">5</span> </span><br><span class="line">div = <span class="keyword">lambda</span> x : x / <span class="number">5</span> </span><br><span class="line">fn = compose(div,sub,mul,add);</span><br><span class="line"><span class="built_in">print</span>(fn(<span class="number">50</span>));</span><br><span class="line">fn = composeLeft(mul,div,sub,add);</span><br><span class="line"><span class="built_in">print</span>(fn(<span class="number">50</span>));</span><br><span class="line">fn = compose(add,mul,sub,div);</span><br><span class="line"><span class="built_in">print</span>(fn(<span class="number">50</span>));</span><br><span class="line">fn = compose(add,compose(mul,sub,div));</span><br><span class="line"><span class="built_in">print</span>(fn(<span class="number">50</span>));</span><br><span class="line">fn = compose(compose(add,mul),sub,div);</span><br><span class="line"><span class="built_in">print</span>(fn(<span class="number">50</span>));</span><br></pre></td></tr></table></figure>
<p>最后3种组合方式都返回30。注意，排序顺序要保持一致</p>
<h3 id="2，函数柯里化"><a href="#2，函数柯里化" class="headerlink" title="2，函数柯里化"></a>2，函数柯里化</h3><p>【问题提出】</p>
<p>函数合成是把多个单一参数的函数合成为一个多参数的函数运算。例如，a(x)和b(x)组合为a(b(x))，则组合为f(a,b,x)。</p>
<p>【注意】</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">这里的a(x)和b(x)都只能接收一个参数。如果接收多个参数，如a(x,y)和b(a,b,c),那么函数合成就比较麻烦。</span><br></pre></td></tr></table></figure>
<p>与函数合成相反的运算就是函数柯里化。所谓柯里化，就是把一个多参数的函数转化为一个单一参数的函数。有了柯里化运算之后，就能让所有函数只接收一个参数，实现分布运算。</p>
<p>【设计思路】</p>
<p>定义一个闭包体，先记录函数部分所需要的参数，然后异步接收剩余参数。也就是说，把多参数的函数分解为多步运算的函数，以实现每次调用函数时，仅需要传递更少或单个参数。例如，下面是一个简单的求和函数add()。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">def add(x,y):</span><br><span class="line">	return x+y</span><br></pre></td></tr></table></figure>
<p>每次调用add()，需要同时传入2个参数，如果希望每次仅传入1个参数，可以这样实现柯里化：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">add</span>(<span class="params">x</span>):</span><br><span class="line">	<span class="keyword">def</span> <span class="title function_">sub</span>(<span class="params">y</span>):</span><br><span class="line">		<span class="keyword">return</span> x + y</span><br><span class="line">	<span class="keyword">return</span> sub</span><br><span class="line">	</span><br><span class="line"><span class="built_in">print</span>(add(<span class="number">2</span>)(<span class="number">6</span>))	<span class="comment">#输出为8，连续调用</span></span><br><span class="line">add1 = add(<span class="number">200</span>)</span><br><span class="line"><span class="built_in">print</span>(add1(<span class="number">2</span>))		<span class="comment">#输出为202，分布调用</span></span><br></pre></td></tr></table></figure>
<p>函数add()接收一个参数，并返回一个参数，这个返回的参数可以再接收一个参数，最后返回两个参数数之和。从某种意义上讲，这是一种对参数的“缓存”，是一种非常高效的函数式运算方法。</p>
<p>【代码实现】</p>
<p>设计curry可以接收一个函数，即原始函数，返回的也是一个函数，及柯里化函数。这个返回的柯里化函数在执行过程中会不断的返回一个存储了传入参数的函数，直到触发了原始函数执行的条件。例如，设计一个add()函数，计算连个参数之和。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">def add(x,y):</span><br><span class="line">	return x * y</span><br></pre></td></tr></table></figure>
<p>柯里化函数</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curryAdd = curry(add)</span><br></pre></td></tr></table></figure>
<p>这个add()需要两个参数，但是执行curryAdd()时可以传入一个参数，当传入的参数少于add()需要的参数时，add()函数并不会执行，curryAdd()就会将这个参数记录下来，并且返回林外一个函数，这个函数可以继续接收传入参数。如果传入参数的总数等于add（）需要参数的总数，就执行原始参数，返回想要的结果。或则没有参数限制，最后根据空的小括号调用作为执行原始参数的条件，返回运算结果。</p>
<p>【封装代码】</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#函数柯里化</span><br></pre></td></tr></table></figure>
<p>【应用代码】</p>
<p>应用函数无形参限制</p>
<p>【示例一】设计求和函数没有形参限制，函数柯里化将根据空小括号作为最后调用原始函数的条件。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">%求和函数，参数不限</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">add</span>(<span class="params">*arguments</span>):</span><br><span class="line">	<span class="comment">#迭代所有参数值，返回最后汇总的值</span></span><br><span class="line">	<span class="built_in">sum</span> = <span class="number">0</span></span><br><span class="line">	<span class="keyword">for</span> i <span class="keyword">in</span> arguments:</span><br><span class="line">		<span class="keyword">if</span> <span class="built_in">isinstance</span>(i,(<span class="built_in">int</span>,<span class="built_in">float</span>)):</span><br><span class="line">			<span class="built_in">sum</span> = <span class="built_in">sum</span> + i</span><br><span class="line">	<span class="keyword">return</span> <span class="built_in">sum</span></span><br><span class="line">	</span><br><span class="line"><span class="comment">#柯里化函数</span></span><br><span class="line">curried = curry(add)</span><br><span class="line"><span class="built_in">print</span>(curried(<span class="number">1</span>)(<span class="number">2</span>)(<span class="number">3</span>)())</span><br><span class="line">curried = curry(add)</span><br><span class="line"><span class="built_in">print</span>(curried(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)(<span class="number">4</span>)())</span><br><span class="line">curried = curry(add,<span class="number">1</span>)</span><br><span class="line"><span class="built_in">print</span>(curried(<span class="number">1</span>,<span class="number">2</span>)(<span class="number">3</span>)(<span class="number">3</span>)())</span><br><span class="line">curried = curry(add,<span class="number">1</span>,<span class="number">5</span>)</span><br><span class="line"><span class="built_in">print</span>(curried(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>)(<span class="number">5</span>)())</span><br></pre></td></tr></table></figure>
<p>应用函数有形参限制</p>
<p>【限制2】设计求和函数，返回3个参数之和。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">add</span>(<span class="params">a,b,c</span>):</span><br><span class="line">	<span class="keyword">return</span> a + b + c</span><br><span class="line">	</span><br><span class="line"><span class="comment">#柯里化函数</span></span><br><span class="line">curried = curry(add,<span class="number">2</span>)</span><br><span class="line"><span class="built_in">print</span>(curried(<span class="number">1</span>)(<span class="number">2</span>))</span><br><span class="line">curried = curry(add,<span class="number">2</span>,<span class="number">1</span>)</span><br><span class="line"><span class="built_in">print</span>(curried(<span class="number">2</span>))</span><br><span class="line">curried = curry(add)</span><br><span class="line"><span class="built_in">print</span>(curried(<span class="number">1</span>)(<span class="number">2</span>)(<span class="number">6</span>))</span><br><span class="line">curried = curry(add)</span><br><span class="line"><span class="built_in">print</span>(curried(<span class="number">1</span>,<span class="number">2</span>,<span class="number">6</span>))</span><br></pre></td></tr></table></figure>
<p>curry函数的设计不是固定的，可以根据具体应用场景灵活定制。curry主要有3个作用：缓存参数、暂缓函数执行、分解执行任务。</p>
<h3 id=""><a href="#" class="headerlink" title=" "></a> </h3></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://qscftyjm.github.io">John Doe</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://qscftyjm.github.io/2023/11/30/%E5%87%BD%E6%95%B0/">https://qscftyjm.github.io/2023/11/30/%E5%87%BD%E6%95%B0/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://qscftyjm.github.io" target="_blank">Hexo</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/python%E5%AD%A6%E4%B9%A0/">python学习</a></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg3.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2023/11/30/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B/" title="面向对象编程"><img class="cover" src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">面向对象编程</div></div></a></div><div class="next-post pull-right"><a href="/2023/11/30/%E6%88%91%E7%9A%84%E7%AC%AC%E4%B8%89%E7%AF%87%E6%96%87%E7%AB%A0/" title="这是我的第三篇文章"><img class="cover" src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg3.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">这是我的第三篇文章</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2023/11/30/%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%E5%92%8C%E7%A8%8B%E5%BA%8F%E8%B0%83%E8%AF%95/" title="异常处理和程序调试"><img class="cover" src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg3.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-11-30</div><div class="title">异常处理和程序调试</div></div></a></div><div><a href="/2023/11/30/%E6%A8%A1%E5%9D%97%E5%92%8C%E5%8C%85/" title="模块和包"><img class="cover" src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg3.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-11-30</div><div class="title">模块和包</div></div></a></div><div><a href="/2023/11/30/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/" title="正则表达式"><img class="cover" src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg3.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-11-30</div><div class="title">正则表达式</div></div></a></div><div><a href="/2023/11/30/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B/" title="面向对象编程"><img class="cover" src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-11-30</div><div class="title">面向对象编程</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">John Doe</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">8</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">4</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/qscftyjm"><i class="fab fa-github"></i><span>🛴前往小家...</span></a><div class="card-info-social-icons is-center"><a class="social-icon faa-parent animated-hover" href="https://github.com/qscftyjm" target="_blank" title="github"><svg class="social_icon faa-tada" aria-hidden="true"><use xlink:href="#icon-github"></use></svg></a><a class="social-icon faa-parent animated-hover" href="mailto:xxxxxx@gmail.com" target="_blank" title="envelope"><svg class="social_icon faa-tada" aria-hidden="true"><use xlink:href="#icon-youjian"></use></svg></a><a class="social-icon faa-parent animated-hover" href="https://im.qq.com/download" target="_blank" title="QQ"><svg class="social_icon faa-tada" aria-hidden="true"><use xlink:href="#icon-QQ"></use></svg></a><a class="social-icon faa-parent animated-hover" href="https://space.bilibili.com/" target="_blank" title="B站"><svg class="social_icon faa-tada" aria-hidden="true"><use xlink:href="#icon-bilibili"></use></svg></a><a class="social-icon faa-parent animated-hover" href="https://youtube.com/" target="_blank" title="Youtube"><svg class="social_icon faa-tada" aria-hidden="true"><use xlink:href="#icon-youtube"></use></svg></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content"><center>主域名：<br><a target="_blank" rel="noopener" href="https://www.fomal.cc"><b><font color="#5ea6e5">fomal.cc</font></b></a>&nbsp;|&nbsp;<a target="_blank" rel="noopener" href="https://www.fomal.cn"><b><font color="#5ea6e5">fomal.cn</font></b></a><br>备用域名：<br><a target="_blank" rel="noopener" href="https://blog.fomal.cc"><b><font color="#5ea6e5">blog.fomal.cc</font></b></a><br><a target="_blank" rel="noopener" href="https://aa.fomal.cc"><b><font color="#5ea6e5">aa.fomal.cc</font></b></a><br><a target="_blank" rel="noopener" href="https://bb.fomal.cc"><b><font color="#5ea6e5">bb.fomal.cc</font></b></a><br><a href="mailto:admin@fomal.cn">📬：<b><font color="#a591e0">admin@fomal.cn</font></b></a></center></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%87%BD%E6%95%B0"><span class="toc-number">1.</span> <span class="toc-text">函数</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%EF%BC%8C%E5%AE%9A%E4%B9%89%E5%92%8C%E8%B0%83%E7%94%A8%E5%87%BD%E6%95%B0"><span class="toc-number">1.1.</span> <span class="toc-text">1，定义和调用函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%EF%BC%8C%E5%AE%9A%E4%B9%89%E5%87%BD%E6%95%B0"><span class="toc-number">1.1.1.</span> <span class="toc-text">1，定义函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%EF%BC%8C%E8%B0%83%E7%94%A8%E5%87%BD%E6%95%B0"><span class="toc-number">1.1.2.</span> <span class="toc-text">2，调用函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%EF%BC%8C%E5%AE%9A%E4%B9%89%E5%B5%8C%E5%A5%97%E5%87%BD%E6%95%B0"><span class="toc-number">1.1.3.</span> <span class="toc-text">3，定义嵌套函数</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E5%87%BD%E6%95%B0%E7%9A%84%E5%8F%82%E6%95%B0%E5%92%8C%E8%BF%94%E5%9B%9E%E5%80%BC"><span class="toc-number">1.2.</span> <span class="toc-text">2,函数的参数和返回值</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%EF%BC%8C%E5%BD%A2%E5%8F%82%E4%B8%8E%E5%AE%9E%E5%8F%82"><span class="toc-number">1.2.1.</span> <span class="toc-text">1，形参与实参</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%EF%BC%8C%E4%BD%8D%E7%BD%AE%E5%8F%82%E6%95%B0"><span class="toc-number">1.2.2.</span> <span class="toc-text">2，位置参数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%EF%BC%8C%E5%85%B3%E9%94%AE%E5%AD%97%E5%8F%82%E6%95%B0"><span class="toc-number">1.2.3.</span> <span class="toc-text">3，关键字参数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4%EF%BC%8C%E9%BB%98%E8%AE%A4%E5%8F%82%E6%95%B0"><span class="toc-number">1.2.4.</span> <span class="toc-text">4，默认参数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5%EF%BC%8C%E5%8F%AF%E5%8F%98%E5%8F%82%E6%95%B0"><span class="toc-number">1.2.5.</span> <span class="toc-text">5，可变参数</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%EF%BC%8C%E5%8D%95%E6%98%9F%E5%8F%B7%E5%BD%A2%E5%8F%82"><span class="toc-number">1.2.5.1.</span> <span class="toc-text">1，单星号形参</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%EF%BC%8C%E5%8F%8C%E6%98%9F%E5%8F%B7%E5%BD%A2%E5%8F%82"><span class="toc-number">1.2.5.2.</span> <span class="toc-text">2，双星号形参</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6%EF%BC%8C%E6%B7%B7%E5%90%88%E4%BD%BF%E7%94%A8%E5%8F%82%E6%95%B0"><span class="toc-number">1.2.6.</span> <span class="toc-text">6，混合使用参数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7%EF%BC%8C%E5%87%BD%E6%95%B0%E7%9A%84%E8%BF%94%E5%9B%9E%E5%80%BC"><span class="toc-number">1.2.7.</span> <span class="toc-text">7，函数的返回值</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%EF%BC%8C%E5%8C%BF%E5%90%8D%E5%87%BD%E6%95%B0"><span class="toc-number">1.3.</span> <span class="toc-text">3，匿名函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%EF%BC%8C%E5%AE%9A%E4%B9%89%E5%8C%BF%E5%90%8D%E5%87%BD%E6%95%B0"><span class="toc-number">1.3.1.</span> <span class="toc-text">1，定义匿名函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%EF%BC%8C%E5%BA%8F%E5%88%97%E5%A4%84%E7%90%86%E5%87%BD%E6%95%B0%E5%92%8Clambda%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">1.3.2.</span> <span class="toc-text">2，序列处理函数和lambda表达式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4%EF%BC%8C%E5%8F%98%E9%87%8F%E4%BD%9C%E7%94%A8%E5%9F%9F"><span class="toc-number">1.4.</span> <span class="toc-text">4，变量作用域</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%EF%BC%8C%E5%AE%9A%E4%B9%89%E4%BD%9C%E7%94%A8%E5%9F%9F"><span class="toc-number">1.4.1.</span> <span class="toc-text">1，定义作用域</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%EF%BC%8C%E4%BD%9C%E7%94%A8%E4%BA%8E%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.4.2.</span> <span class="toc-text">2，作用于类型</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%EF%BC%8CL%EF%BC%88local%EF%BC%89%E7%BA%A7%EF%BC%9A%E5%B1%80%E9%83%A8%E4%BD%9C%E7%94%A8%E5%9F%9F"><span class="toc-number">1.4.2.1.</span> <span class="toc-text">1，L（local）级：局部作用域</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%EF%BC%8CE-enclosing-%E7%BA%A7%EF%BC%9A%E5%B5%8C%E5%A5%97%E4%BD%9C%E7%94%A8%E5%9F%9F"><span class="toc-number">1.4.2.2.</span> <span class="toc-text">2，E(enclosing)级：嵌套作用域</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3%EF%BC%8CG%EF%BC%88global%EF%BC%89%E7%BA%A7%EF%BC%9A%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F"><span class="toc-number">1.4.2.3.</span> <span class="toc-text">3，G（global）级：全局变量</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4%EF%BC%8CB%EF%BC%88bulit-in%EF%BC%89%E7%BA%A7%EF%BC%9A%E5%86%85%E7%BD%AE%E4%BD%9C%E7%94%A8%E5%9F%9F"><span class="toc-number">1.4.2.4.</span> <span class="toc-text">4，B（bulit-in）级：内置作用域</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%EF%BC%8CLEGB%E8%A7%A3%E6%9E%90%E8%A7%84%E5%88%99"><span class="toc-number">1.4.3.</span> <span class="toc-text">3，LEGB解析规则</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4%EF%BC%8C%E8%B7%A8%E8%B6%8A%E4%BF%AE%E6%94%B9%E5%8F%98%E9%87%8F"><span class="toc-number">1.4.4.</span> <span class="toc-text">4，跨越修改变量</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%EF%BC%8Cglobal%E5%85%B3%E9%94%AE%E5%AD%97"><span class="toc-number">1.4.4.1.</span> <span class="toc-text">1，global关键字</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%EF%BC%8Cnonlocal%E5%85%B3%E9%94%AE%E5%AD%97"><span class="toc-number">1.4.4.2.</span> <span class="toc-text">2，nonlocal关键字</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5%EF%BC%8C%E4%BF%AE%E6%94%B9%E5%B5%8C%E5%A5%97%E4%BD%9C%E7%94%A8%E5%9F%9F%E5%8F%98%E9%87%8F"><span class="toc-number">1.4.5.</span> <span class="toc-text">5，修改嵌套作用域变量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6%EF%BC%8C%E6%AF%94%E8%BE%83%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F%E5%92%8C%E5%B1%80%E9%83%A8%E5%8F%98%E9%87%8F"><span class="toc-number">1.4.6.</span> <span class="toc-text">6，比较全局变量和局部变量</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5%EF%BC%8C%E9%97%AD%E5%8C%85%E5%92%8C%E8%A3%85%E9%A5%B0%E5%99%A8"><span class="toc-number">1.5.</span> <span class="toc-text">5，闭包和装饰器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%EF%BC%8C%E5%AE%9A%E4%B9%89%E9%97%AD%E5%8C%85"><span class="toc-number">1.5.1.</span> <span class="toc-text">1，定义闭包</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%EF%BC%8C%E5%BD%A2%E6%88%90%E5%8E%9F%E7%90%86"><span class="toc-number">1.5.1.1.</span> <span class="toc-text">1，形成原理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%EF%BC%8C%E9%97%AD%E5%8C%85%E7%BB%93%E6%9E%84"><span class="toc-number">1.5.1.2.</span> <span class="toc-text">2，闭包结构</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%EF%BC%8C%E5%87%BD%E6%95%B0%E8%A3%85%E9%A5%B0%E5%99%A8"><span class="toc-number">1.5.2.</span> <span class="toc-text">2，函数装饰器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%EF%BC%8C%E6%A1%88%E4%BE%8B%EF%BC%8C%E4%B8%BA%E8%A3%85%E9%A5%B0%E5%99%A8%E8%AE%BE%E7%BD%AE%E5%8F%82%E6%95%B0"><span class="toc-number">1.5.3.</span> <span class="toc-text">3，案例，为装饰器设置参数</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%EF%BC%8C%E5%AF%B9%E5%B8%A6%E5%8F%82%E6%95%B0%E7%9A%84%E5%87%BD%E6%95%B0%E8%BF%9B%E8%A1%8C%E8%A3%85%E9%A5%B0"><span class="toc-number">1.5.3.1.</span> <span class="toc-text">1，对带参数的函数进行装饰</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%EF%BC%8C%E8%A7%A3%E5%86%B3%E5%87%BD%E6%95%B0%E5%8F%82%E6%95%B0%E6%95%B0%E9%87%8F%E4%B8%8D%E7%A1%AE%E5%AE%9A%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-number">1.5.3.2.</span> <span class="toc-text">2，解决函数参数数量不确定的问题</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3%EF%BC%8C%E8%A3%85%E9%A5%B0%E5%99%A8%E5%B8%A6%E5%8F%82%E6%95%B0"><span class="toc-number">1.5.3.3.</span> <span class="toc-text">3，装饰器带参数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4%EF%BC%8C%E6%A1%88%E4%BE%8B%EF%BC%9A%E8%A7%A3%E5%86%B3%E8%A3%85%E9%A5%B0%E5%99%A8%E7%9A%84%E5%89%AF%E4%BD%9C%E7%94%A8"><span class="toc-number">1.5.3.4.</span> <span class="toc-text">4，案例：解决装饰器的副作用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5%EF%BC%8C%E6%A1%88%E4%BE%8B%EF%BC%9A%E8%AE%BE%E8%AE%A1%E5%87%BD%E6%95%B0%E8%B0%83%E7%94%A8%E6%97%A5%E5%BF%97%E8%A3%85%E9%A5%B0%E5%99%A8"><span class="toc-number">1.5.3.5.</span> <span class="toc-text">5，案例：设计函数调用日志装饰器</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6%EF%BC%8C%E6%A1%88%E4%BE%8B%EF%BC%9A%E4%BD%BF%E7%94%A8lambda%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%AE%9A%E4%B9%89%E9%97%AD%E5%8C%85"><span class="toc-number">1.5.3.6.</span> <span class="toc-text">6，案例：使用lambda表达式定义闭包</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7%EF%BC%8C%E6%A1%88%E4%BE%8B%EF%BC%9A%E8%A7%A3%E5%86%B3%E9%97%AD%E5%8C%85%E7%9A%84%E5%89%AF%E4%BD%9C%E7%94%A8"><span class="toc-number">1.5.3.7.</span> <span class="toc-text">7，案例：解决闭包的副作用</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6%EF%BC%8C%E9%80%92%E5%BD%92%E5%87%BD%E6%95%B0"><span class="toc-number">1.6.</span> <span class="toc-text">6，递归函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%EF%BC%8C%E5%AE%9A%E4%B9%89%E9%80%92%E5%BD%92%E5%87%BD%E6%95%B0"><span class="toc-number">1.6.1.</span> <span class="toc-text">1，定义递归函数</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%EF%BC%8C%E6%B1%82%E8%A7%A3%E9%80%92%E5%BD%92%E9%97%AE%E9%A2%98"><span class="toc-number">1.6.1.1.</span> <span class="toc-text">1，求解递归问题</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%EF%BC%8C%E8%A7%A3%E6%9E%90%E9%80%92%E5%BD%92%E5%9E%8B%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84"><span class="toc-number">1.6.1.2.</span> <span class="toc-text">2，解析递归型数据结构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3%EF%BC%8C%E9%80%82%E5%90%88%E4%BD%BF%E7%94%A8%E9%80%92%E5%BD%92%E6%B3%95%E8%A7%A3%E5%86%B3%E9%97%AE%E9%A2%98"><span class="toc-number">1.6.1.3.</span> <span class="toc-text">3，适合使用递归法解决问题</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%EF%BC%8C%E5%B0%BE%E9%80%92%E5%BD%92"><span class="toc-number">1.6.2.</span> <span class="toc-text">2，尾递归</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%EF%BC%8C%E9%80%92%E5%BD%92%E4%B8%8E%E8%BF%AD%E4%BB%A3"><span class="toc-number">1.6.3.</span> <span class="toc-text">3，递归与迭代</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4%EF%BC%8C%E6%A1%88%E4%BE%8B%EF%BC%9A%E7%8C%B4%E5%AD%90%E5%90%83%E6%A1%83"><span class="toc-number">1.6.4.</span> <span class="toc-text">4，案例：猴子吃桃</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5%EF%BC%8C%E6%A1%88%E4%BE%8B%EF%BC%9A%E8%A7%92%E8%B0%B7%E5%AE%9A%E7%90%86"><span class="toc-number">1.6.5.</span> <span class="toc-text">5，案例：角谷定理</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7%EF%BC%8C%E6%A1%88%E4%BE%8B%E5%AE%9E%E6%88%98"><span class="toc-number">1.7.</span> <span class="toc-text">7，案例实战</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%EF%BC%8C%E5%87%BD%E6%95%B0%E5%90%88%E6%88%90"><span class="toc-number">1.7.1.</span> <span class="toc-text">1，函数合成</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%EF%BC%8C%E5%87%BD%E6%95%B0%E6%9F%AF%E9%87%8C%E5%8C%96"><span class="toc-number">1.7.2.</span> <span class="toc-text">2，函数柯里化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.7.3.</span> <span class="toc-text"> </span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2023/11/30/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/" title="正则表达式"><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg3.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="正则表达式"/></a><div class="content"><a class="title" href="/2023/11/30/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/" title="正则表达式">正则表达式</a><time datetime="2023-11-30T03:25:05.000Z" title="发表于 2023-11-30 11:25:05">2023-11-30</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/11/30/%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%E5%92%8C%E7%A8%8B%E5%BA%8F%E8%B0%83%E8%AF%95/" title="异常处理和程序调试"><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg3.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="异常处理和程序调试"/></a><div class="content"><a class="title" href="/2023/11/30/%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%E5%92%8C%E7%A8%8B%E5%BA%8F%E8%B0%83%E8%AF%95/" title="异常处理和程序调试">异常处理和程序调试</a><time datetime="2023-11-30T03:24:05.000Z" title="发表于 2023-11-30 11:24:05">2023-11-30</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/11/30/%E6%A8%A1%E5%9D%97%E5%92%8C%E5%8C%85/" title="模块和包"><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg3.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="模块和包"/></a><div class="content"><a class="title" href="/2023/11/30/%E6%A8%A1%E5%9D%97%E5%92%8C%E5%8C%85/" title="模块和包">模块和包</a><time datetime="2023-11-30T03:23:05.000Z" title="发表于 2023-11-30 11:23:05">2023-11-30</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2022 - 2023 By John Doe</div><div class="footer_custom_text">I wish you to become your own sun, no need to rely on who's light.</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"></div><canvas id="universe"></canvas><script defer src="/js/universe.js"></script><script async src="//at.alicdn.com/t/c/font_4353759_wpytq9xoldp.js"></script><div id="aplayer-uxAIfEUs" class="aplayer aplayer-tag-marker meting-tag-marker no-destroy" data-id="8492133976" data-server="netease" data-type="playlist" data-mode="circulation" data-fixed="true" data-autoplay="true" data-mutex="true" data-listmaxheight="340px" data-preload="auto" data-theme="#3F51B5"></div><script defer src="https://npm.elemecdn.com/jquery@latest/dist/jquery.min.js"></script><script defer data-pjax src="/js/cat.js"></script><canvas class="fireworks" mobile="false"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/fireworks.min.js"></script><script defer="defer" id="fluttering_ribbon" mobile="true" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-fluttering-ribbon.min.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/metingjs/dist/Meting.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show","#web_bg",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener
  btf.removeGlobalFnEvent('pjax')
  btf.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

  typeof disqusjs === 'object' && disqusjs.destroy()
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><!-- hexo injector body_end start --> <script data-pjax>if(document.getElementById('recent-posts') && (location.pathname ==='/'|| '/' ==='all')){
    var parent = document.getElementById('recent-posts');
    var child = '<div class="recent-post-item" style="width:100%;height: auto"><div id="catalog_magnet"><a class="magnet_link_more"  href="https://qscftyjm.github.io/categories" style="flex:1;text-align: center;margin-bottom: 10px;">查看更多...</a></div></div>';
    console.log('已挂载magnet')
    parent.insertAdjacentHTML("afterbegin",child)}
     </script><style>#catalog_magnet{flex-wrap: wrap;display: flex;width:100%;justify-content:space-between;padding: 10px 10px 0 10px;align-content: flex-start;}.magnet_item{flex-basis: calc(50% - 5px);background: #f2f2f2;margin-bottom: 10px;border-radius: 8px;transition: all 0.2s ease-in-out;}.magnet_item:hover{background: #b30070}.magnet_link_more{color:#555}.magnet_link{color:black}.magnet_link:hover{color:white}@media screen and (max-width: 600px) {.magnet_item {flex-basis: 100%;}}.magnet_link_context{display:flex;padding: 10px;font-size:16px;transition: all 0.2s ease-in-out;}.magnet_link_context:hover{padding: 10px 20px;}</style>
    <style></style><script data-pjax>
    function butterfly_categories_card_injector_config(){
      var parent_div_git = document.getElementById('recent-posts');
      var item_html = '<style>li.categoryBar-list-item{width:32.3%;}.categoryBar-list{max-height: 190px;overflow:auto;}.categoryBar-list::-webkit-scrollbar{width:0!important}@media screen and (max-width: 650px){.categoryBar-list{max-height: 160px;}}</style><div class="recent-post-item" style="height:auto;width:100%;padding:0px;"><div id="categoryBar"><ul class="categoryBar-list"></ul></div></div>';
      console.log('已挂载butterfly_categories_card')
      parent_div_git.insertAdjacentHTML("afterbegin",item_html)
      }
    if( document.getElementById('recent-posts') && (location.pathname ==='/'|| '/' ==='all')){
    butterfly_categories_card_injector_config()
    }
  </script><script data-pjax>
  function butterfly_clock_anzhiyu_injector_config(){
    var parent_div_git = document.getElementsByClassName('sticky_layout')[0];
    var item_html = '<div class="card-widget card-clock"><div class="card-glass"><div class="card-background"><div class="card-content"><div id="hexo_electric_clock"><img class="entered loading" id="card-clock-loading" src="https://cdn.cbd.int/hexo-butterfly-clock-anzhiyu/lib/loading.gif" style="height: 120px; width: 100%;" data-ll-status="loading"/></div></div></div></div></div>';
    console.log('已挂载butterfly_clock_anzhiyu')
    if(parent_div_git) {
      parent_div_git.insertAdjacentHTML("afterbegin",item_html)
    }
  }
  var elist = 'null'.split(',');
  var cpage = location.pathname;
  var epage = '/';
  var qweather_key = 'b16a1fa0e63c46a4b8f28abfb06ae3fe';
  var gaud_map_key = 'e2b04289e870b005374ee030148d64fd&s=rsv3';
  var baidu_ak_key = 'undefined';
  var flag = 0;
  var clock_rectangle = '113.34532,23.15624';
  var clock_default_rectangle_enable = 'false';

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_clock_anzhiyu_injector_config();
  }
  else if (epage === cpage){
    butterfly_clock_anzhiyu_injector_config();
  }
  </script><script src="https://widget.qweather.net/simple/static/js/he-simple-common.js?v=2.0"></script><script data-pjax src="https://cdn.cbd.int/hexo-butterfly-clock-anzhiyu/lib/clock.min.js"></script><script data-pjax>
  function butterfly_footer_beautify_injector_config(){
    var parent_div_git = document.getElementById('footer-wrap');
    var item_html = '<div id="workboard"></div><p id="ghbdages"><a class="github-badge" target="_blank" href="https://hexo.io/" style="margin-inline:5px" data-title="博客框架为Hexo_v6.2.0" title=""><img src="https://img.shields.io/badge/Frame-Hexo-blue?style=flat&amp;logo=hexo" alt=""/></a><a class="github-badge" target="_blank" href="https://butterfly.js.org/" style="margin-inline:5px" data-title="主题版本Butterfly_v4.3.1" title=""><img src="https://img.shields.io/badge/Theme-Butterfly-6513df?style=flat&amp;logo=bitdefender" alt=""/></a><a class="github-badge" target="_blank" href="https://vercel.com/" style="margin-inline:5px" data-title="本站采用多线部署，主线路托管于Vercel" title=""><img src="https://img.shields.io/badge/Hosted-Vercel-brightgreen?style=flat&amp;logo=Vercel" alt=""/></a><a class="github-badge" target="_blank" href="https://dashboard.4everland.org/" style="margin-inline:5px" data-title="本站采用多线部署，备用线路托管于4EVERLAND" title=""><img src="https://img.shields.io/badge/Hosted-4EVERLAND-22DDDD?style=flat&amp;logo=IPFS" alt=""/></a><a class="github-badge" target="_blank" href="https://github.com/" style="margin-inline:5px" data-title="本站项目由Github托管" title=""><img src="https://img.shields.io/badge/Source-Github-d021d6?style=flat&amp;logo=GitHub" alt=""/></a><a class="github-badge" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" style="margin-inline:5px" data-title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可" title=""><img src="https://img.shields.io/badge/Copyright-BY--NC--SA%204.0-d42328?style=flat&amp;logo=Claris" alt=""/></a></p>';
    console.log('已挂载butterfly_footer_beautify')
    parent_div_git.insertAdjacentHTML("beforeend",item_html)
    }
  var elist = 'null'.split(',');
  var cpage = location.pathname;
  var epage = 'all';
  var flag = 0;

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_footer_beautify_injector_config();
  }
  else if (epage === cpage){
    butterfly_footer_beautify_injector_config();
  }
  </script><script async src="https://npm.elemecdn.com/hexo-butterfly-footer-beautify@1.0.0/lib/runtime.js"></script><div class="js-pjax"><script async="async">var arr = document.getElementsByClassName('recent-post-item');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__zoomIn');
    arr[i].setAttribute('data-wow-duration', '2s');
    arr[i].setAttribute('data-wow-delay', '1s');
    arr[i].setAttribute('data-wow-offset', '100');
    arr[i].setAttribute('data-wow-iteration', '2');
  }</script><script async="async">var arr = document.getElementsByClassName('card-widget');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__zoomIn');
    arr[i].setAttribute('data-wow-duration', '');
    arr[i].setAttribute('data-wow-delay', '');
    arr[i].setAttribute('data-wow-offset', '');
    arr[i].setAttribute('data-wow-iteration', '');
  }</script></div><script defer src="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/wow.min.js"></script><script defer src="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/wow_init.js"></script><script data-pjax>
  function butterfly_swiper_injector_config(){
    var parent_div_git = document.getElementById('recent-posts');
    var item_html = '<div class="recent-post-item" style="height: auto;width: 100%"><div class="blog-slider swiper-container-fade swiper-container-horizontal" id="swiper_container"><div class="blog-slider__wrp swiper-wrapper" style="transition-duration: 0ms;"><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;2023/11/30/面向对象编程/&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-11-30</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;2023/11/30/面向对象编程/&quot;);" href="javascript:void(0);" alt="">面向对象编程</a><div class="blog-slider__text">再怎么看我也不知道怎么描述它的啦！</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;2023/11/30/面向对象编程/&quot;);" href="javascript:void(0);" alt="">详情       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;2023/11/30/正则表达式/&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg3.png" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-11-30</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;2023/11/30/正则表达式/&quot;);" href="javascript:void(0);" alt="">正则表达式</a><div class="blog-slider__text">再怎么看我也不知道怎么描述它的啦！</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;2023/11/30/正则表达式/&quot;);" href="javascript:void(0);" alt="">详情       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;2023/11/30/模块和包/&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg3.png" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-11-30</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;2023/11/30/模块和包/&quot;);" href="javascript:void(0);" alt="">模块和包</a><div class="blog-slider__text">再怎么看我也不知道怎么描述它的啦！</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;2023/11/30/模块和包/&quot;);" href="javascript:void(0);" alt="">详情       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;2023/11/30/我的第二篇文章/&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-11-30</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;2023/11/30/我的第二篇文章/&quot;);" href="javascript:void(0);" alt="">文章二：博客搭建功能的实现</a><div class="blog-slider__text">再怎么看我也不知道怎么描述它的啦！</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;2023/11/30/我的第二篇文章/&quot;);" href="javascript:void(0);" alt="">详情       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;2023/11/30/我的第一篇文章/&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-11-30</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;2023/11/30/我的第一篇文章/&quot;);" href="javascript:void(0);" alt="">这是我的第一篇文章</a><div class="blog-slider__text">再怎么看我也不知道怎么描述它的啦！</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;2023/11/30/我的第一篇文章/&quot;);" href="javascript:void(0);" alt="">详情       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;2023/11/30/我的第三篇文章/&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg3.png" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-11-30</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;2023/11/30/我的第三篇文章/&quot;);" href="javascript:void(0);" alt="">这是我的第三篇文章</a><div class="blog-slider__text">再怎么看我也不知道怎么描述它的啦！</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;2023/11/30/我的第三篇文章/&quot;);" href="javascript:void(0);" alt="">详情       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;2023/11/30/函数/&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg3.png" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-11-30</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;2023/11/30/函数/&quot;);" href="javascript:void(0);" alt="">函数</a><div class="blog-slider__text">再怎么看我也不知道怎么描述它的啦！</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;2023/11/30/函数/&quot;);" href="javascript:void(0);" alt="">详情       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;2023/11/30/异常处理和程序调试/&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg3.png" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-11-30</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;2023/11/30/异常处理和程序调试/&quot;);" href="javascript:void(0);" alt="">异常处理和程序调试</a><div class="blog-slider__text">再怎么看我也不知道怎么描述它的啦！</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;2023/11/30/异常处理和程序调试/&quot;);" href="javascript:void(0);" alt="">详情       </a></div></div></div><div class="blog-slider__pagination swiper-pagination-clickable swiper-pagination-bullets"></div></div></div>';
    console.log('已挂载butterfly_swiper')
    parent_div_git.insertAdjacentHTML("afterbegin",item_html)
    }
  var elist = 'undefined'.split(',');
  var cpage = location.pathname;
  var epage = 'all';
  var flag = 0;

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_swiper_injector_config();
  }
  else if (epage === cpage){
    butterfly_swiper_injector_config();
  }
  </script><script defer src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.js"></script><script defer data-pjax src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper_init.js"></script><script async src="//at.alicdn.com/t/font_2032782_8d5kxvn09md.js"></script><script data-pjax src="https://npm.elemecdn.com/hexo-filter-gitcalendar/lib/gitcalendar.js"></script><script data-pjax>
  function gitcalendar_injector_config(){
      var parent_div_git = document.getElementById('gitZone');
      var item_html = '<div class="recent-post-item" id="gitcalendarBar" style="width:100%;height:auto;padding:10px;"><style>#git_container{min-height: 280px}@media screen and (max-width:650px) {#git_container{min-height: 0px}}</style><div id="git_loading" style="width:10%;height:100%;margin:0 auto;display: block;"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 50 50" style="enable-background:new 0 0 50 50" xml:space="preserve"><path fill="#d0d0d0" d="M25.251,6.461c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615V6.461z" transform="rotate(275.098 25 25)"><animatetransform attributeType="xml" attributeName="transform" type="rotate" from="0 25 25" to="360 25 25" dur="0.6s" repeatCount="indefinite"></animatetransform></path></svg><style>#git_container{display: none;}</style></div><div id="git_container"></div></div>';
      parent_div_git.insertAdjacentHTML("afterbegin",item_html)
      console.log('已挂载gitcalendar')
      }

    if( document.getElementById('gitZone') && (location.pathname ==='/about/'|| '/about/' ==='all')){
        gitcalendar_injector_config()
        GitCalendarInit("https://gitcalendar.fomal.cc/api?qscftyjm",['#d9e0df', '#c6e0dc', '#a8dcd4', '#9adcd2', '#89ded1', '#77e0d0', '#5fdecb', '#47dcc6', '#39dcc3', '#1fdabe', '#00dab9'],'qscftyjm')
    }
  </script><!-- hexo injector body_end end --><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/hibiki.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":true},"log":false});</script></body></html>